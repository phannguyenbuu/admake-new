import{cc as Ke,cd as Xe,r as d,ce as Te,s as r,cf as J,cg as Q,ch as Ae,Q as N,ci as vt,cj as Z,ck as os,cl as _t,cm as as,cn as cs,co as wt,cp as ot,cq as ls,cr as ye,cs as hs,ct as ge,cu as us,Y,bV as kt,cv as ds,cw as me,cx as fs,cy as at,cz as ps,X as F,S as w,cA as gs,q as W,a0 as ms,cB as ys,a1 as Ve,x as be,cC as bs,cD as xs,cE as vs,cF as _s,t as Me,v as Ct,cG as ws,cH as ks,R as Cs}from"./index-DSXg4j8h.js";import{D as Ss,g as Rs,u as Es,v as Ts,S as As,I as ct,T as js,a as St,b as Rt,c as Et}from"./Send-D2xSmM1Y.js";import{D as Bs,Q as lt}from"./QRCode-1UIPng5S.js";import{U as Os,T as ht}from"./useUpdateButtonTask-BBMvU65e.js";import{T as Ls,a as ut}from"./Tabs-D63ZjrfH.js";import{B as Ee}from"./Button-BC5GB06O.js";function Ns(t){return Ke("MuiDialogContentText",t)}Xe("MuiDialogContentText",["root"]);const Ds=t=>{const{classes:e}=t,n=Ae({root:["root"]},Ns,e);return{...e,...n}},Ms=J(N,{shouldForwardProp:t=>vt(t)||t==="classes",name:"MuiDialogContentText",slot:"Root"})({}),Tt=d.forwardRef(function(e,s){const n=Te({props:e,name:"MuiDialogContentText"}),{children:i,className:o,...a}=n,c=Ds(a);return r.jsx(Ms,{component:"p",variant:"body1",color:"textSecondary",ref:s,ownerState:a,className:Q(c.root,o),...n,classes:c})}),Is=t=>{const{classes:e}=t;return Ae({root:["root"]},Rs,e)},Fs=J(N,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),At=d.forwardRef(function(e,s){const n=Te({props:e,name:"MuiDialogTitle"}),{className:i,id:o,...a}=n,c=n,h=Is(c),{titleId:u=o}=d.useContext(Ss);return r.jsx(Fs,{component:"h2",className:Q(h.root,i),ownerState:c,ref:s,variant:"h6",id:o??u,...a})});function Ps(t,e,s){const n=e.getBoundingClientRect(),i=s&&s.getBoundingClientRect(),o=wt(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const u=o.getComputedStyle(e);a=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let c=0,h=0;if(a&&a!=="none"&&typeof a=="string"){const u=a.split("(")[1].split(")")[0].split(",");c=parseInt(u[4],10),h=parseInt(u[5],10)}return t==="left"?i?`translateX(${i.right+c-n.left}px)`:`translateX(${o.innerWidth+c-n.left}px)`:t==="right"?i?`translateX(-${n.right-i.left-c}px)`:`translateX(-${n.left+n.width-c}px)`:t==="up"?i?`translateY(${i.bottom+h-n.top}px)`:`translateY(${o.innerHeight+h-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-h}px)`:`translateY(-${n.top+n.height-h}px)`}function $s(t){return typeof t=="function"?t():t}function ve(t,e,s){const n=$s(s),i=Ps(t,e,n);i&&(e.style.webkitTransform=i,e.style.transform=i)}const Vs=d.forwardRef(function(e,s){const n=Z(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},o={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:a,appear:c=!0,children:h,container:u,direction:f="down",easing:g=i,in:l,onEnter:A,onEntered:k,onEntering:T,onExit:y,onExited:v,onExiting:S,style:_,timeout:R=o,TransitionComponent:L=os,...U}=e,x=d.useRef(null),E=_t(as(h),x,s),M=p=>B=>{p&&(B===void 0?p(x.current):p(x.current,B))},ne=M((p,B)=>{ve(f,p,u),ls(p),A&&A(p,B)}),ee=M((p,B)=>{const re=ot({timeout:R,style:_,easing:g},{mode:"enter"});p.style.webkitTransition=n.transitions.create("-webkit-transform",{...re}),p.style.transition=n.transitions.create("transform",{...re}),p.style.webkitTransform="none",p.style.transform="none",T&&T(p,B)}),ie=M(k),te=M(S),K=M(p=>{const B=ot({timeout:R,style:_,easing:g},{mode:"exit"});p.style.webkitTransition=n.transitions.create("-webkit-transform",B),p.style.transition=n.transitions.create("transform",B),ve(f,p,u),y&&y(p)}),he=M(p=>{p.style.webkitTransition="",p.style.transition="",v&&v(p)}),I=p=>{a&&a(x.current,p)},q=d.useCallback(()=>{x.current&&ve(f,x.current,u)},[f,u]);return d.useEffect(()=>{if(l||f==="down"||f==="right")return;const p=cs(()=>{x.current&&ve(f,x.current,u)}),B=wt(x.current);return B.addEventListener("resize",p),()=>{p.clear(),B.removeEventListener("resize",p)}},[f,l,u]),d.useEffect(()=>{l||q()},[l,q]),r.jsx(L,{nodeRef:x,onEnter:ne,onEntered:ie,onEntering:ee,onExit:K,onExited:he,onExiting:te,addEndListener:I,appear:c,in:l,timeout:R,...U,children:(p,{ownerState:B,...re})=>d.cloneElement(h,{ref:E,style:{visibility:p==="exited"&&!l?"hidden":void 0,..._,...h.props.style},...re})})});function zs(t){return Ke("MuiFab",t)}const dt=Xe("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Us=t=>{const{color:e,variant:s,classes:n,size:i}=t,o={root:["root",s,`size${ye(i)}`,e==="inherit"?"colorInherit":e]},a=Ae(o,zs,n);return{...n,...a}},qs=J(hs,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>vt(t)||t==="classes",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.root,e[s.variant],e[`size${ye(s.size)}`],s.color==="inherit"&&e.colorInherit,e[ye(s.size)],e[s.color]]}})(ge(({theme:t})=>{var e,s;return{...t.typography.button,minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.grey[900]:(s=(e=t.palette).getContrastText)==null?void 0:s.call(e,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${dt.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),ge(({theme:t})=>({variants:[...Object.entries(t.palette).filter(us(["dark","contrastText"])).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].contrastText,backgroundColor:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:(t.vars||t).palette[e].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e].main}}}}))]})),ge(({theme:t})=>({[`&.${dt.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}))),ft=d.forwardRef(function(e,s){const n=Te({props:e,name:"MuiFab"}),{children:i,className:o,color:a="default",component:c="button",disabled:h=!1,disableFocusRipple:u=!1,focusVisibleClassName:f,size:g="large",variant:l="circular",...A}=n,k={...n,color:a,component:c,disabled:h,disableFocusRipple:u,size:g,variant:l},T=Us(k);return r.jsx(qs,{className:Q(T.root,o),component:c,disabled:h,focusRipple:!u,focusVisibleClassName:Q(T.focusVisible,f),ownerState:k,ref:s,...A,classes:T,children:i})}),Hs=Y(r.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),Ws=Y(r.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}));function Ys(t){return Ke("MuiRating",t)}const de=Xe("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]);function Ks(t){const e=t.toString().split(".")[1];return e?e.length:0}function Ie(t,e){if(t==null)return t;const s=Math.round(t/e)*e;return Number(s.toFixed(Ks(e)))}const Xs=t=>{const{classes:e,size:s,readOnly:n,disabled:i,emptyValueFocused:o,focusVisible:a}=t,c={root:["root",`size${ye(s)}`,i&&"disabled",a&&"focusVisible",n&&"readOnly"],label:["label","pristine"],labelEmptyValue:[o&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return Ae(c,Ys,e)},Qs=J("span",{name:"MuiRating",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[{[`& .${de.visuallyHidden}`]:e.visuallyHidden},e.root,e[`size${ye(s.size)}`],s.readOnly&&e.readOnly]}})(ge(({theme:t})=>({display:"inline-flex",position:"relative",fontSize:t.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${de.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${de.focusVisible} .${de.iconActive}`]:{outline:"1px solid #999"},[`& .${de.visuallyHidden}`]:Ts,variants:[{props:{size:"small"},style:{fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:t.typography.pxToRem(30)}},{props:({ownerState:e})=>e.readOnly,style:{pointerEvents:"none"}}]}))),jt=J("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:t},e)=>[e.label,t.emptyValueFocused&&e.labelEmptyValueActive]})({cursor:"inherit",variants:[{props:({ownerState:t})=>t.emptyValueFocused,style:{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}}]}),Gs=J("span",{name:"MuiRating",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:s}=t;return[e.icon,s.iconEmpty&&e.iconEmpty,s.iconFilled&&e.iconFilled,s.iconHover&&e.iconHover,s.iconFocus&&e.iconFocus,s.iconActive&&e.iconActive]}})(ge(({theme:t})=>({display:"flex",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),pointerEvents:"none",variants:[{props:({ownerState:e})=>e.iconActive,style:{transform:"scale(1.2)"}},{props:({ownerState:e})=>e.iconEmpty,style:{color:(t.vars||t).palette.action.disabled}}]}))),Js=J("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:t=>fs(t)&&t!=="iconActive",overridesResolver:(t,e)=>{const{iconActive:s}=t;return[e.decimal,s&&e.iconActive]}})({position:"relative",variants:[{props:({iconActive:t})=>t,style:{transform:"scale(1.2)"}}]});function Zs(t){const{value:e,...s}=t;return r.jsx("span",{...s})}function pt(t){const{classes:e,disabled:s,emptyIcon:n,focus:i,getLabelText:o,highlightSelectedOnly:a,hover:c,icon:h,IconContainerComponent:u,isActive:f,itemValue:g,labelProps:l,name:A,onBlur:k,onChange:T,onClick:y,onFocus:v,readOnly:S,ownerState:_,ratingValue:R,ratingValueRounded:L,slots:U={},slotProps:x={}}=t,E=a?g===R:g<=R,M=g<=c,ne=g<=i,ee=g===L,ie=`${A}-${kt()}`,te={slots:U,slotProps:x},[K,he]=me("icon",{elementType:Gs,className:Q(e.icon,E?e.iconFilled:e.iconEmpty,M&&e.iconHover,ne&&e.iconFocus,f&&e.iconActive),externalForwardedProps:te,ownerState:{..._,iconEmpty:!E,iconFilled:E,iconHover:M,iconFocus:ne,iconActive:f},additionalProps:{value:g},internalForwardedProps:{as:u}}),[I,q]=me("label",{elementType:jt,externalForwardedProps:te,ownerState:{..._,emptyValueFocused:void 0},additionalProps:{style:l==null?void 0:l.style,htmlFor:ie}}),p=r.jsx(K,{...he,children:n&&!E?n:h});return S?r.jsx("span",{...l,children:p}):r.jsxs(d.Fragment,{children:[r.jsxs(I,{...q,children:[p,r.jsx("span",{className:e.visuallyHidden,children:o(g)})]}),r.jsx("input",{className:e.visuallyHidden,onFocus:v,onBlur:k,onChange:T,onClick:y,disabled:s,value:g,id:ie,type:"radio",name:A,checked:ee})]})}const en=r.jsx(Hs,{fontSize:"inherit"}),tn=r.jsx(Ws,{fontSize:"inherit"});function sn(t){return`${t||"0"} Star${t!==1?"s":""}`}const nn=d.forwardRef(function(e,s){const n=Te({name:"MuiRating",props:e}),{component:i="span",className:o,defaultValue:a=null,disabled:c=!1,emptyIcon:h=tn,emptyLabelText:u="Empty",getLabelText:f=sn,highlightSelectedOnly:g=!1,icon:l=en,IconContainerComponent:A=Zs,max:k=5,name:T,onChange:y,onChangeActive:v,onMouseLeave:S,onMouseMove:_,precision:R=1,readOnly:L=!1,size:U="medium",value:x,slots:E={},slotProps:M={},...ne}=n,ee=kt(T),[ie,te]=Es({controlled:x,default:a,name:"Rating"}),K=Ie(ie,R),he=ds(),[{hover:I,focus:q},p]=d.useState({hover:-1,focus:-1});let B=K;I!==-1&&(B=I),q!==-1&&(B=q);const[re,Le]=d.useState(!1),st=d.useRef(),Kt=_t(st,s),Xt=C=>{_&&_(C);const j=st.current,{right:D,left:xe,width:oe}=j.getBoundingClientRect();let ae;he?ae=(D-C.clientX)/oe:ae=(C.clientX-xe)/oe;let H=Ie(k*ae+R/2,R);H=ps(H,R,k),p(se=>se.hover===H&&se.focus===H?se:{hover:H,focus:H}),Le(!1),v&&I!==H&&v(C,H)},Qt=C=>{S&&S(C);const j=-1;p({hover:j,focus:j}),v&&I!==j&&v(C,j)},nt=C=>{let j=C.target.value===""?null:parseFloat(C.target.value);I!==-1&&(j=I),te(j),y&&y(C,j)},Gt=C=>{C.clientX===0&&C.clientY===0||(p({hover:-1,focus:-1}),te(null),y&&parseFloat(C.target.value)===K&&y(C,null))},Jt=C=>{at(C.target)&&Le(!0);const j=parseFloat(C.target.value);p(D=>({hover:D.hover,focus:j}))},Zt=C=>{if(I!==-1)return;at(C.target)||Le(!1);const j=-1;p(D=>({hover:D.hover,focus:j}))},[es,it]=d.useState(!1),ue={...n,component:i,defaultValue:a,disabled:c,emptyIcon:h,emptyLabelText:u,emptyValueFocused:es,focusVisible:re,getLabelText:f,icon:l,IconContainerComponent:A,max:k,precision:R,readOnly:L,size:U},X=Xs(ue),Ne={slots:E,slotProps:M},[ts,ss]=me("root",{ref:Kt,className:Q(X.root,o),elementType:Qs,externalForwardedProps:{...Ne,...ne,component:i},getSlotProps:C=>({...C,onMouseMove:j=>{var D;Xt(j),(D=C.onMouseMove)==null||D.call(C,j)},onMouseLeave:j=>{var D;Qt(j),(D=C.onMouseLeave)==null||D.call(C,j)}}),ownerState:ue,additionalProps:{role:L?"img":null,"aria-label":L?f(B):null}}),[ns,is]=me("label",{className:Q(X.label,X.labelEmptyValue),elementType:jt,externalForwardedProps:Ne,ownerState:ue}),[rs,rt]=me("decimal",{className:X.decimal,elementType:Js,externalForwardedProps:Ne,ownerState:ue});return r.jsxs(ts,{...ss,children:[Array.from(new Array(k)).map((C,j)=>{const D=j+1,xe={classes:X,disabled:c,emptyIcon:h,focus:q,getLabelText:f,highlightSelectedOnly:g,hover:I,icon:l,IconContainerComponent:A,name:ee,onBlur:Zt,onChange:nt,onClick:Gt,onFocus:Jt,ratingValue:B,ratingValueRounded:K,readOnly:L,ownerState:ue,slots:E,slotProps:M},oe=D===Math.ceil(B)&&(I!==-1||q!==-1);if(R<1){const ae=Array.from(new Array(1/R));return d.createElement(rs,{...rt,key:D,className:Q(rt.className,oe&&X.iconActive),iconActive:oe},ae.map((H,se)=>{const De=Ie(D-1+(se+1)*R,R);return r.jsx(pt,{...xe,isActive:!1,itemValue:De,labelProps:{style:ae.length-1===se?{}:{width:De===B?`${(se+1)*R*100}%`:"0%",overflow:"hidden",position:"absolute"}}},De)}))}return r.jsx(pt,{...xe,isActive:oe,itemValue:D},D)}),!L&&!c&&r.jsxs(ns,{...is,children:[r.jsx("input",{className:X.visuallyHidden,value:"",id:`${ee}-empty`,type:"radio",name:ee,checked:K==null,onFocus:()=>it(!0),onBlur:()=>it(!1),onChange:nt}),r.jsx("span",{className:X.visuallyHidden,children:u})]})]})}),rn=({workspace:t,onClick:e,selected:s})=>{const n=i=>{e(i,t)};return r.jsx(F,{onClick:n,sx:{width:"100%",backgroundColor:s?"#ccc":"#fff",cursor:"pointer"},p:2,children:r.jsx(w,{direction:"row",alignItems:"center",justifyContent:"space-between",children:r.jsx(w,{direction:"row",spacing:2,children:r.jsxs(w,{spacing:.3,children:[r.jsx(N,{variant:"subtitle2",children:t.name}),r.jsx(N,{variant:"caption",color:"#333",fontStyle:"italic",children:t.address})]})})})})},z=Object.create(null);z.open="0";z.close="1";z.ping="2";z.pong="3";z.message="4";z.upgrade="5";z.noop="6";const ke=Object.create(null);Object.keys(z).forEach(t=>{ke[z[t]]=t});const ze={type:"error",data:"parser error"},Bt=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ot=typeof ArrayBuffer=="function",Lt=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Qe=({type:t,data:e},s,n)=>Bt&&e instanceof Blob?s?n(e):gt(e,n):Ot&&(e instanceof ArrayBuffer||Lt(e))?s?n(e):gt(new Blob([e]),n):n(z[t]+(e||"")),gt=(t,e)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];e("b"+(n||""))},s.readAsDataURL(t)};function mt(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Fe;function on(t,e){if(Bt&&t.data instanceof Blob)return t.data.arrayBuffer().then(mt).then(e);if(Ot&&(t.data instanceof ArrayBuffer||Lt(t.data)))return e(mt(t.data));Qe(t,!1,s=>{Fe||(Fe=new TextEncoder),e(Fe.encode(s))})}const yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<yt.length;t++)pe[yt.charCodeAt(t)]=t;const an=t=>{let e=t.length*.75,s=t.length,n,i=0,o,a,c,h;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),f=new Uint8Array(u);for(n=0;n<s;n+=4)o=pe[t.charCodeAt(n)],a=pe[t.charCodeAt(n+1)],c=pe[t.charCodeAt(n+2)],h=pe[t.charCodeAt(n+3)],f[i++]=o<<2|a>>4,f[i++]=(a&15)<<4|c>>2,f[i++]=(c&3)<<6|h&63;return u},cn=typeof ArrayBuffer=="function",Ge=(t,e)=>{if(typeof t!="string")return{type:"message",data:Nt(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:ln(t.substring(1),e)}:ke[s]?t.length>1?{type:ke[s],data:t.substring(1)}:{type:ke[s]}:ze},ln=(t,e)=>{if(cn){const s=an(t);return Nt(s,e)}else return{base64:!0,data:t}},Nt=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Dt="",hn=(t,e)=>{const s=t.length,n=new Array(s);let i=0;t.forEach((o,a)=>{Qe(o,!1,c=>{n[a]=c,++i===s&&e(n.join(Dt))})})},un=(t,e)=>{const s=t.split(Dt),n=[];for(let i=0;i<s.length;i++){const o=Ge(s[i],e);if(n.push(o),o.type==="error")break}return n};function dn(){return new TransformStream({transform(t,e){on(t,s=>{const n=s.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(s)})}})}let Pe;function _e(t){return t.reduce((e,s)=>e+s.length,0)}function we(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)s[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),s}function fn(t,e){Pe||(Pe=new TextDecoder);const s=[];let n=0,i=-1,o=!1;return new TransformStream({transform(a,c){for(s.push(a);;){if(n===0){if(_e(s)<1)break;const h=we(s,1);o=(h[0]&128)===128,i=h[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(_e(s)<2)break;const h=we(s,2);i=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),n=3}else if(n===2){if(_e(s)<8)break;const h=we(s,8),u=new DataView(h.buffer,h.byteOffset,h.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){c.enqueue(ze);break}i=f*Math.pow(2,32)+u.getUint32(4),n=3}else{if(_e(s)<i)break;const h=we(s,i);c.enqueue(Ge(o?h:Pe.decode(h),e)),n=0}if(i===0||i>t){c.enqueue(ze);break}}}})}const Mt=4;function O(t){if(t)return pn(t)}function pn(t){for(var e in O.prototype)t[e]=O.prototype[e];return t}O.prototype.on=O.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};O.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};O.prototype.off=O.prototype.removeListener=O.prototype.removeAllListeners=O.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<s.length;i++)if(n=s[i],n===e||n.fn===e){s.splice(i,1);break}return s.length===0&&delete this._callbacks["$"+t],this};O.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,i=s.length;n<i;++n)s[n].apply(this,e)}return this};O.prototype.emitReserved=O.prototype.emit;O.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};O.prototype.hasListeners=function(t){return!!this.listeners(t).length};const je=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),P=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),gn="arraybuffer";function It(t,...e){return e.reduce((s,n)=>(t.hasOwnProperty(n)&&(s[n]=t[n]),s),{})}const mn=P.setTimeout,yn=P.clearTimeout;function Be(t,e){e.useNativeTimers?(t.setTimeoutFn=mn.bind(P),t.clearTimeoutFn=yn.bind(P)):(t.setTimeoutFn=P.setTimeout.bind(P),t.clearTimeoutFn=P.clearTimeout.bind(P))}const bn=1.33;function xn(t){return typeof t=="string"?vn(t):Math.ceil((t.byteLength||t.size)*bn)}function vn(t){let e=0,s=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}function Ft(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _n(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function wn(t){let e={},s=t.split("&");for(let n=0,i=s.length;n<i;n++){let o=s[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class kn extends Error{constructor(e,s,n){super(e),this.description=s,this.context=n,this.type="TransportError"}}class Je extends O{constructor(e){super(),this.writable=!1,Be(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,n){return super.emitReserved("error",new kn(e,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=Ge(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=_n(e);return s.length?"?"+s:""}}class Cn extends Je{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};un(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,hn(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=Ft()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let Pt=!1;try{Pt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Sn=Pt;function Rn(){}class En extends Cn{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,s){const n=this.request({method:"POST",data:e});n.on("success",s),n.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=e}}class V extends O{constructor(e,s,n){super(),this.createRequest=e,Be(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const s=It(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=V.requestsCount++,V.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Rn,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete V.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}V.requestsCount=0;V.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",bt);else if(typeof addEventListener=="function"){const t="onpagehide"in P?"pagehide":"unload";addEventListener(t,bt,!1)}}function bt(){for(let t in V.requests)V.requests.hasOwnProperty(t)&&V.requests[t].abort()}const Tn=(function(){const t=$t({xdomain:!1});return t&&t.responseType!==null})();class An extends En{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=Tn&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new V($t,this.uri(),e)}}function $t(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Sn))return new XMLHttpRequest}catch{}if(!e)try{return new P[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class jn extends Je{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,n=Vt?{}:It(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;Qe(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}i&&je(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=Ft()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const $e=P.WebSocket||P.MozWebSocket;class Bn extends jn{createSocket(e,s,n){return Vt?new $e(e,s,n):s?new $e(e,s):new $e(e)}doWrite(e,s){this.ws.send(s)}}class On extends Je{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=fn(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(s).getReader(),i=dn();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{n.read().then(({done:c,value:h})=>{c||(this.onPacket(h),o())}).catch(c=>{})};o();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;this._writer.write(n).then(()=>{i&&je(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ln={websocket:Bn,webtransport:On,polling:An},Nn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Dn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ue(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let i=Nn.exec(t||""),o={},a=14;for(;a--;)o[Dn[a]]=i[a]||"";return s!=-1&&n!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Mn(o,o.path),o.queryKey=In(o,o.query),o}function Mn(t,e){const s=/\/{2,9}/g,n=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function In(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,o){i&&(s[i]=o)}),s}const qe=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ce=[];qe&&addEventListener("offline",()=>{Ce.forEach(t=>t())},!1);class G extends O{constructor(e,s){if(super(),this.binaryType=gn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const n=Ue(e);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Ue(s.host).host);Be(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=wn(this.opts.query)),qe&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ce.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=Mt,s.transport=e,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&G.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",G.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(s+=xn(i)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,je(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,n){return this._sendPacket("message",e,s,n),this}send(e,s,n){return this._sendPacket("message",e,s,n),this}_sendPacket(e,s,n,i){if(typeof s=="function"&&(i=s,s=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:e,data:s,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(G.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),qe&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Ce.indexOf(this._offlineEventListener);n!==-1&&Ce.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}G.protocol=Mt;class Fn extends G{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),n=!1;G.priorWebsocketSuccess=!1;const i=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",g=>{if(!n)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;G.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const l=new Error("probe error");l.transport=s.name,this.emitReserved("upgradeError",l)}}))};function o(){n||(n=!0,f(),s.close(),s=null)}const a=g=>{const l=new Error("probe error: "+g);l.transport=s.name,o(),this.emitReserved("upgradeError",l)};function c(){a("transport closed")}function h(){a("socket closed")}function u(g){s&&g.name!==s.name&&o()}const f=()=>{s.removeListener("open",i),s.removeListener("error",a),s.removeListener("close",c),this.off("close",h),this.off("upgrading",u)};s.once("open",i),s.once("error",a),s.once("close",c),this.once("close",h),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&s.push(e[n]);return s}}let Pn=class extends Fn{constructor(e,s={}){const n=typeof e=="object"?e:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>Ln[i]).filter(i=>!!i)),super(e,n)}};function $n(t,e="",s){let n=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),n=Ue(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+e,n.href=n.protocol+"://"+o+(s&&s.port===n.port?"":":"+n.port),n}const Vn=typeof ArrayBuffer=="function",zn=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,zt=Object.prototype.toString,Un=typeof Blob=="function"||typeof Blob<"u"&&zt.call(Blob)==="[object BlobConstructor]",qn=typeof File=="function"||typeof File<"u"&&zt.call(File)==="[object FileConstructor]";function Ze(t){return Vn&&(t instanceof ArrayBuffer||zn(t))||Un&&t instanceof Blob||qn&&t instanceof File}function Se(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(Se(t[s]))return!0;return!1}if(Ze(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Se(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Se(t[s]))return!0;return!1}function Hn(t){const e=[],s=t.data,n=t;return n.data=He(s,e),n.attachments=e.length,{packet:n,buffers:e}}function He(t,e){if(!t)return t;if(Ze(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=He(t[n],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=He(t[n],e));return s}return t}function Wn(t,e){return t.data=We(t.data,e),delete t.attachments,t}function We(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=We(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=We(t[s],e));return t}const Yn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Kn=5;var m;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(m||(m={}));class Xn{constructor(e){this.replacer=e}encode(e){return(e.type===m.EVENT||e.type===m.ACK)&&Se(e)?this.encodeAsBinary({type:e.type===m.EVENT?m.BINARY_EVENT:m.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===m.BINARY_EVENT||e.type===m.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=Hn(e),n=this.encodeAsString(s.packet),i=s.buffers;return i.unshift(n),i}}function xt(t){return Object.prototype.toString.call(t)==="[object Object]"}class et extends O{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const n=s.type===m.BINARY_EVENT;n||s.type===m.BINARY_ACK?(s.type=n?m.EVENT:m.ACK,this.reconstructor=new Qn(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Ze(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const n={type:Number(e.charAt(0))};if(m[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===m.BINARY_EVENT||n.type===m.BINARY_ACK){const o=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const a=e.substring(o,s);if(a!=Number(a)||e.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(s+1)==="/"){const o=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););n.nsp=e.substring(o,s)}else n.nsp="/";const i=e.charAt(s+1);if(i!==""&&Number(i)==i){const o=s+1;for(;++s;){const a=e.charAt(s);if(a==null||Number(a)!=a){--s;break}if(s===e.length)break}n.id=Number(e.substring(o,s+1))}if(e.charAt(++s)){const o=this.tryParse(e.substr(s));if(et.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case m.CONNECT:return xt(s);case m.DISCONNECT:return s===void 0;case m.CONNECT_ERROR:return typeof s=="string"||xt(s);case m.EVENT:case m.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Yn.indexOf(s[0])===-1);case m.ACK:case m.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Qn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=Wn(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Gn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:et,Encoder:Xn,get PacketType(){return m},protocol:Kn},Symbol.toStringTag,{value:"Module"}));function $(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Jn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ut extends O{constructor(e,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$(e,"open",this.onopen.bind(this)),$(e,"packet",this.onpacket.bind(this)),$(e,"error",this.onerror.bind(this)),$(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var n,i,o;if(Jn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const a={type:m.EVENT,data:s};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const f=this.ids++,g=s.pop();this._registerAckCallback(f,g),a.id=f}const c=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,h=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(h?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,s){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=s;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);s.call(this,new Error("operation has timed out"))},i),a=(...c)=>{this.io.clearTimeoutFn(o),s.apply(this,c)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...s){return new Promise((n,i)=>{const o=(a,c)=>a?i(a):n(c);o.withError=!0,s.push(o),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(i)):(this._queue.shift(),s&&s(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:m.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case m.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case m.EVENT:case m.BINARY_EVENT:this.onevent(e);break;case m.ACK:case m.BINARY_ACK:this.onack(e);break;case m.DISCONNECT:this.ondisconnect();break;case m.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let n=!1;return function(...i){n||(n=!0,s.packet({type:m.ACK,id:e,data:i}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:m.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,e.data)}}}function ce(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}ce.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};ce.prototype.reset=function(){this.attempts=0};ce.prototype.setMin=function(t){this.ms=t};ce.prototype.setMax=function(t){this.max=t};ce.prototype.setJitter=function(t){this.jitter=t};class Ye extends O{constructor(e,s){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Be(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new ce({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const i=s.parser||Gn;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Pn(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=$(s,"open",function(){n.onopen(),e&&e()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},a=$(s,"error",o);if(this._timeout!==!1){const c=this._timeout,h=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),s.close()},c);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($(e,"ping",this.onping.bind(this)),$(e,"data",this.ondata.bind(this)),$(e,"error",this.onerror.bind(this)),$(e,"close",this.onclose.bind(this)),$(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){je(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ut(this,e,s),this.nsps[e]=n),n}_destroy(e){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let n=0;n<s.length;n++)this.engine.write(s[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const fe={};function Re(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=$n(t,e.path||"/socket.io"),n=s.source,i=s.id,o=s.path,a=fe[i]&&o in fe[i].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let h;return c?h=new Ye(n,e):(fe[i]||(fe[i]=new Ye(n,e)),h=fe[i]),s.query&&!e.query&&(e.query=s.queryKey),h.socket(s.path,e)}Object.assign(Re,{Manager:Ye,Socket:Ut,io:Re,connect:Re});const Zn=gs()||"https://admake.vn",b=Re(Zn,{path:"/socket.io",autoConnect:!1,transports:["websocket"]}),ei=Y(r.jsx("path",{d:"m9.4 10.5 4.77-8.26C13.47 2.09 12.75 2 12 2c-2.4 0-4.6.85-6.32 2.25l3.66 6.35zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9zm.26 1h-7.49l.29.5 4.76 8.25C21 16.97 22 14.61 22 12c0-.69-.07-1.35-.2-2M8.54 12l-3.9-6.75C3.01 7.03 2 9.39 2 12c0 .69.07 1.35.2 2h7.49zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15zm11.27 0-3.9 6.76c.7.15 1.42.24 2.17.24 2.4 0 4.6-.85 6.32-2.25l-3.66-6.35z"})),ti=Y(r.jsx("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm7 7V3.5L18.5 9z"})),si=Y(r.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5"})),ni=Y([r.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),r.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),r.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-4c-.73 0-1.38-.18-1.96-.52-.12.14-.86.98-1.01 1.15.86.55 1.87.87 2.97.87 1.11 0 2.12-.33 2.98-.88-.97-1.09-.01-.02-1.01-1.15-.59.35-1.24.53-1.97.53"},"2")]),ii=Y(r.jsx("path",{d:"M1 21h4V9H1zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73z"})),qt=d.createContext(void 0),ji=({children:t})=>{const[e,s]=d.useState(null);return r.jsx(qt.Provider,{value:{workspaceEl:e,setWorkspaceEl:s},children:t})},Oe=()=>{const t=d.useContext(qt);if(t===void 0)throw new Error("useChatGroup must be used within a ChatGroupProvider");return t},ri=Y(r.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),oi=Y(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"})),Ht=Ve();function tt(t){const e=new Date(t),s=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return String(e.getSeconds()).padStart(2,"0"),`Ngy ${i}/${n}/${s}-${o}:${a}`}const ai=({el:t,menu:e,onDelete:s})=>{if(!t)return;const n=Z(),i=`${Ht}/${t==null?void 0:t.file_url}`,o=()=>{console.log("Download File",i);const a=document.createElement("a");a.href=i;const c=i.split("/").pop();c&&(a.download=c,document.body.appendChild(a),a.click(),document.body.removeChild(a))};return r.jsxs(w,{direction:"row",justifyContent:t.incoming?"start":"end",children:[r.jsx(F,{p:.2,sx:{backgroundColor:t.incoming?n.palette.background.default:n.palette.primary.main,borderRadius:1.5,width:"max-content"},children:r.jsx(w,{spacing:2,children:r.jsxs("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:[r.jsxs(w,{p:2,spacing:3,direction:"row",alignItems:"center",sx:{backgroundColor:n.palette.background.paper,borderRadius:1},children:[r.jsx(ri,{fontSize:"large"}),r.jsx(N,{variant:"caption",children:t.file_url}),r.jsx(be,{onClick:o,children:r.jsx(Bs,{fontSize:"large"})})]}),(t==null?void 0:t.createdAt)&&r.jsx(N,{variant:"body2",sx:{color:t.incoming?"#000":"#fff"},children:tt(t==null?void 0:t.createdAt)})]})})}),e&&r.jsx(le,{el:t,onDelete:()=>s(t)})]})},ci=({el:t,menu:e,onDelete:s})=>{if(!t)return null;const n=Z();return r.jsxs(w,{direction:"row",justifyContent:t.incoming?"start":"end",children:[r.jsx(F,{p:.2,sx:{backgroundColor:t.incoming?n.palette.background.default:n.palette.primary.main,borderRadius:1.5,width:"max-content"},children:r.jsx(w,{spacing:2,children:r.jsxs(w,{p:2,spacing:3,alignItems:"start",sx:{backgroundColor:n.palette.background.paper,borderRadius:1},children:[r.jsx("img",{src:t.preview,alt:t.text,style:{maxHeight:210,borderRadius:"10px"}}),r.jsxs(w,{spacing:2,children:[r.jsx(N,{variant:"subtitle2",children:"Creating Chat App"}),r.jsx(N,{variant:"subtitle2",sx:{color:"#000"},component:ys,to:"//https://www.youtube.com",children:"www.youtube.com"})]}),r.jsx(N,{variant:"body2",color:t.incoming?"#000":"#fff",children:t.text})]})})}),e&&r.jsx(le,{el:t,onDelete:()=>s(t)})]})},li=({el:t,menu:e,onDelete:s})=>{if(!t)return null;const n=Z();return r.jsxs(w,{direction:"row",justifyContent:t.incoming?"start":"end",children:[r.jsx(F,{p:.2,sx:{backgroundColor:t.incoming?n.palette.background.default:n.palette.primary.main,borderRadius:1.5,width:"max-content"},children:r.jsxs(w,{spacing:2,children:[r.jsx(w,{p:2,direction:"column",spacing:3,alignItems:"center",sx:{backgroundColor:n.palette.background.paper,borderRadius:1},children:r.jsx(N,{variant:"body2",color:"#000",children:t.text})}),r.jsx(N,{variant:"body2",color:t.incoming?"#000":"#fff",children:t.reply})]})}),e&&r.jsx(le,{el:t,onDelete:()=>s(t)})]})},hi=({el:t,menu:e,onDelete:s})=>{if(!t)return null;Z();const{userRoleId:n}=W(),i=t.role===-1;i||t.status;const o=`${Ht}/${t.file_url}`;return r.jsxs(w,{direction:"row",justifyContent:i?"start":"end",children:[r.jsx(F,{p:.2,sx:{backgroundColor:i?"#fff":"#00B5B4",borderRadius:1.5,width:"max-content"},children:r.jsxs(w,{spacing:1,children:[r.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:r.jsx("img",{src:o,alt:t.text,style:{maxHeight:210,borderRadius:"10px",cursor:"pointer"}})}),(t==null?void 0:t.createdAt)&&r.jsxs(N,{variant:"body2",fontStyle:"italic",color:i?"#000":"#fff",fontSize:"0.5rem",fontWeight:300,children:[tt(t==null?void 0:t.createdAt),"-",t.user_id]})]})}),e&&r.jsx(le,{el:t,onDelete:()=>s(t)})]})},ui=({el:t,menu:e,onDelete:s})=>{if(!t)return null;Z();const{userRoleId:n}=W(),i=n===-2,o=t.role===-1,a=o?"#fff":t.status==="sending"?"#b0b0b0":"#00B4B6",c=o?"#000":"#fff";return r.jsxs(w,{direction:"row",justifyContent:o?"start":"end",children:[r.jsxs(F,{p:.5,sx:{backgroundColor:a,borderRadius:1.5,width:"max-content",height:"fit-content"},children:[!o&&r.jsx(w,{direction:"row",alignItems:"center",spacing:1,children:i&&r.jsxs(r.Fragment,{children:[r.jsx(ms,{alt:t.username,src:"/images/avatar.png",sx:{width:24,height:24}}),r.jsx(N,{variant:"subtitle2",color:c,fontSize:"0.75rem",fontWeight:500,children:t.username},`DefaultMsg-${t.message_id}-Username`)]})}),r.jsx(N,{variant:"body2",p:1,color:c,fontSize:"0.75rem",fontWeight:300,children:t.text},`DefaultMsg-${t.message_id}-Text`),(t==null?void 0:t.createdAt)&&r.jsxs(N,{variant:"body2",fontStyle:"italic",fontSize:"0.5rem",fontWeight:300,color:c,children:[tt(t==null?void 0:t.createdAt),"-",t.user_id]},`DefaultMsg-${t.message_id}-Time`)]},`DefaultMsg-${t.message_id}-Conatiner`),e&&r.jsx(le,{el:t,onDelete:()=>s(t)})]},`DefaultMsg-${t.message_id}-Wrapper`)},di=({el:t,menu:e,onDelete:s})=>{var l,A;if(!t)return null;const{notifyAdmin:n}=W(),[i,o]=d.useState(((l=t==null?void 0:t.react)==null?void 0:l.rate)??0),{userRoleId:a}=W(),c=a===-2;d.useEffect(()=>(b.on("admake/chat/rate",k=>{console.log("Received rate:",k),o(k.rate)}),b.on("admake/chat/rate_ack",k=>{}),()=>{b.off("admake/chat/rate")}),[t]);const h=async k=>{if(b.connected){const T={workspace_id:t.workspace_id,message_id:t.message_id,rate:k};console.log("Send rate message",t.workspace_id,T),n({text:`Khch hng va chm ${k} sao`,target:`/dashboard/work-tables/${t==null?void 0:t.workspace_id}`}),b.emit("admake/chat/rate",T);const y=d.useContext(Os);if(y){const{setShowUpdateButton:v}=y;v(1)}else throw new Error("UpdateButtonContext not found")}else console.warn("Socket.IO not connected.")},u=(k,T)=>{console.log("Rating value:",T,"cho group",t.workspace_id," message_id",t.message_id),o(T),h(T)},f={1:"Qu km",2:"Km",3:"Trung bnh",4:"t",5:"Rt tt"},g=t&&t.react&&((A=t==null?void 0:t.react)==null?void 0:A.rate)!=0;return r.jsx(r.Fragment,{children:r.jsxs(w,{alignItems:"center",justifyContent:"space-between",spacing:2,py:5,sx:{backgroundColor:"rgba(0,255,255,0.25)",borderRadius:5},children:[r.jsx(N,{variant:"caption",sx:{color:"#000"},children:t.text}),(a<0||c)&&!t.is_favourite&&r.jsx(nn,{name:"simple-controlled",value:i,max:5,onChange:u,sx:{color:"orange"},disabled:g}),r.jsxs(w,{direction:"row",spacing:2,children:[i!==null&&r.jsx(N,{sx:{mt:1,color:"#333"},children:f[i]}),e&&r.jsx(le,{el:t,onDelete:()=>s(t)})]})]})})},le=({el:t,onDelete:e})=>{if(!t||!(t!=null&&t.role))return null;const s=(t==null?void 0:t.role)<0,[n,i]=d.useState(null),o=!!n,a=u=>{i(u.currentTarget)},c=()=>{i(null)},h=()=>{c(),e&&e(t)};return r.jsxs(r.Fragment,{children:[r.jsx(oi,{id:"basic-button",onClick:a,fontSize:"small"}),r.jsx(bs,{id:"basic-menu",anchorEl:n,open:o,onClose:c,MenuListProps:{"aria-labelledby":"basic-button"},children:r.jsx(w,{spacing:1,px:1,children:s&&r.jsx(r.Fragment,{children:r.jsxs(xs,{onClick:h,children:[r.jsx(vs,{children:r.jsx(_s,{fontSize:"small"})}),"Delete"]})})})})]})},Wt=t=>{let e="msg";if(t!==""){e="doc";const s=t.toLowerCase();t.startsWith("http")||t.startsWith("www")?e="link":[".jpg",".jpeg",".png",".gif",".webp",".jfif"].some(n=>s.includes(n))&&(e="img")}return e},fi=({menu:t,messages:e,onDelete:s})=>{Z();const n=d.useRef(null);return d.useEffect(()=>{n.current&&setTimeout(()=>{const i=n.current;i.parentElement.scrollTop=i.parentElement.scrollHeight},200)},[e]),r.jsx(F,{p:3,ref:n,children:r.jsx(w,{spacing:1,children:e&&e.map(i=>{switch(i.file_url&&i.file_url!==""?Wt(i.file_url):i.type){case"timeline":return r.jsx(di,{el:i,menu:t,onDelete:s},`TimeLineMsg-${i.message_id}`);case"img":return r.jsx(hi,{el:i,menu:t,onDelete:s},`MediaMsg-${i.message_id}`);case"doc":return r.jsx(ai,{el:i,menu:t,onDelete:s},`DocMsg-${i.message_id}`);case"link":return r.jsx(ci,{el:i,menu:t,onDelete:s},`LinkMsg-${i.message_id}`);case"reply":return r.jsx(li,{el:i,menu:t,onDelete:s},`ReplyMsg-${i.message_id}`);default:return r.jsx(ui,{el:i,menu:t,onDelete:s},`DefaultMsg-${i.message_id}`)}})})})},pi=J(js)(({theme:t})=>({"& .MuiInputBase-input":{paddingTop:"12px",paddingBottom:"12px"}})),gi=[{color:"#ddd",icon:r.jsx(ei,{fontSize:"large"}),y:50,title:"Image"}];function mi(t,e=2){if(t===0)return"0 Bytes";const s=1024,n=e<0?0:e,i=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,o)).toFixed(n))+" "+i[o]}const yi=d.forwardRef(({inputValue:t,setInputValue:e,setOpenPicker:s,handleSendMessage:n},i)=>{const[o,a]=d.useState(!1),{userId:c,userRoleId:h,isMobile:u}=W(),{workspaceEl:f}=Oe(),g=async()=>{a(l=>!l);try{const l=document.createElement("input");l.type="file",l.onchange=async A=>{const k=A.target;if(!k.files)return;const T=k.files[0];if(!T)return;if(T.size/(1024*1024)>100){Me.error({message:"Kch thc file vt qu 100MB, vui lng chn file nh hn."});return}const v=new FormData;v.append("file",T),v.append("groupId",(f==null?void 0:f.id.toString())||""),v.append("role",h.toString()),v.append("userId",(c==null?void 0:c.toString())||"");for(const[L,U]of v.entries())console.log(`${L}: ${U}`);console.log("Upload"),console.log(Array.from(v.entries()));const S=await fetch(`${Ct()}/message/upload`,{method:"POST",body:v});if(!S.ok){const L=await S.text();throw new Error(`File upload failed: ${S.status} ${S.statusText} - ${L}`)}const R=`${(await S.json()).filename}`;n(`${new Date(Date.now()).toLocaleString()}-${mi(T.size)}`,R),console.log("Document message sent successfully")},l.click()}catch(l){l instanceof Error?(console.error(l.message),Me.error({message:"Upload document failed",description:l.message})):(console.error("Unknown error",l),Me.error({message:"Upload document failed"}))}};return r.jsx(pi,{value:t,onChange:l=>e(l.target.value),fullWidth:!0,placeholder:"Write a message...",variant:"filled",onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),n(t,""))},InputProps:{disableUnderline:!0,startAdornment:r.jsxs(w,{sx:{width:"max-content",mt:-2},children:[r.jsxs(w,{sx:{position:"relative",display:o?"inline-block":"none"},children:[gi.map((l,A)=>r.jsx(ht,{placement:"right",title:l.title,children:r.jsx(ft,{sx:{position:"absolute",top:-l.y,backgroundColor:l.color},children:l.icon})},`ActionItem-${A}`)),r.jsx(ht,{placement:"right",title:"Document",children:r.jsx(ft,{onClick:()=>g(),sx:{position:"absolute",top:-120,backgroundColor:"#0159b2"},children:r.jsx(ti,{fontSize:"large"})})})]}),r.jsx(ct,{position:"start",children:r.jsx(be,{onClick:()=>a(l=>!l),children:r.jsx(si,{})})})]}),endAdornment:r.jsx(ct,{position:"end",children:r.jsx(be,{onClick:()=>s(l=>!l),children:r.jsx(ni,{})})})}})}),bi=d.forwardRef(({setMessages:t},e)=>{const{userId:s,username:n,userRoleId:i,isMobile:o,generateDatetimeId:a}=W(),[c,h]=d.useState(!1),[u,f]=d.useState(""),g=i===-2,{workspaceEl:l}=Oe();d.useEffect(()=>(b.connect(),console.log("WebSocket URL:",b.io.engine.transport.uri),b.on("connect",()=>{console.log("Connected to server",b.id),b.emit("join",{workspace_id:l==null?void 0:l.id})}),b.on("admake/chat/message",y=>{console.log("Received message:",y)}),b.on("disconnect",()=>{console.log("Disconnected from server")}),b.on("admake/chat/message_ack",y=>{t(v=>v.map(S=>S.message_id===y.message_id?{...S,status:"success",message_id:y.message_id}:S))}),()=>{b.off("connect"),b.off("admake/chat/message"),b.off("disconnect"),b.disconnect()}),[l==null?void 0:l.id]);function A(){const y=JSON.parse(localStorage.getItem("Admake-User-Access")||"{}");return(y==null?void 0:y.username)||""}const k=(y,v="")=>{if(!(!y||y==="")){if(b.connected){const S=Date.now(),_={workspace_id:(l==null?void 0:l.id)||"",react:{rate:0},preview:"",reply:"",role:i,icon:"",type:Wt(v),incoming:!1,user_id:s,username:A(),text:y,file_url:v,link:"",message_id:`msg-${a()}`,is_favourite:!1,createdAt:new Date(S),updatedAt:new Date(S),deletedAt:null,status:"sending"};console.log("Send message",_),t(R=>[...R,_]),b.emit("admake/chat/message",_)}else console.warn("Socket.IO not connected.");f("")}},T=()=>{if(b.connected){const y=Date.now(),v={workspace_id:l==null?void 0:l.id,react:{rate:0},preview:"",reply:"",role:i,icon:"",type:"timeline",incoming:!1,user_id:s,username:A(),text:"Qu khch vui lng nh gi d n ny?",file_url:"",link:"",message_id:`tl-${a()}`,is_favourite:!1,createdAt:new Date(y),updatedAt:new Date(y),deletedAt:null,status:"sending"};console.log("Send REWARD message",b.io.opts.host,v),t(S=>[...S,v]),b.emit("admake/chat/message",v)}else console.warn("Socket.IO not connected.");f("")};return r.jsx(r.Fragment,{children:r.jsxs(w,{direction:"row",alignItems:"center",spacing:.5,p:.5,sx:{backgroundColor:"#00B4B6",minWidth:320,zIndex:1300},children:[r.jsx(yi,{onEnterKey:()=>k(u),ref:e,inputValue:u,setInputValue:f,setOpenPicker:h,handleSendMessage:k}),r.jsx(F,{sx:{height:48,width:48,backgroundColor:"#ccc",borderRadius:1.5},onClick:()=>k(u),children:r.jsx(w,{sx:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},children:r.jsx(be,{children:r.jsx(As,{})})})}),g&&r.jsx(F,{sx:{height:48,width:48,backgroundColor:"#ccc",borderRadius:1.5},onClick:()=>T(),children:r.jsx(w,{sx:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},children:r.jsx(be,{children:r.jsx(ii,{sx:{color:"orange"}})})})})]})})}),xi=({title:t,status:e,messages:s,setMessages:n,onDelete:i})=>{d.useRef(null);const{userRoleId:o,isMobile:a,chatBoxHeight:c,isFullChatUI:h}=W();return d.useEffect(()=>{if(console.log("Start_Socket",b),!b)return;const u=f=>{n(g=>g.filter(l=>l.message_id!==f.message_id))};return b.on("admake/chat/delete",u),()=>{b.off("admake/chat/delete",u)}},[b,n]),r.jsxs(w,{sx:{width:o===-2?a?"":"50vw":"100vw"},children:[r.jsx(ws,{title:t,status:e}),r.jsx(F,{className:"scrollbar",sx:{overflowY:"scroll",minWidth:320,minHeight:c-105,maxHeight:c-105,backgroundImage:"url(/backGround.png)"},children:r.jsx(fi,{messages:s,menu:h,onDelete:i})}),r.jsx(bi,{setMessages:n})]})},Yt=Cs.forwardRef(function(e,s){return r.jsx(Vs,{direction:"up",ref:s,...e})}),vi=({open:t,handleClose:e})=>r.jsxs(St,{open:t,TransitionComponent:Yt,keepMounted:!0,onClose:e,"aria-describedby":"alert-dialog-slide-description",children:[r.jsx(At,{children:"Block this contact"}),r.jsx(Rt,{children:r.jsx(Tt,{id:"alert-dialog-slide-description",children:"Are you sure you want to block this contact?"})}),r.jsxs(Et,{children:[r.jsx(Ee,{onClick:e,children:"Cancel"}),r.jsx(Ee,{onClick:e,children:"Yes"})]})]}),_i=({open:t,handleClose:e})=>r.jsxs(St,{open:t,TransitionComponent:Yt,keepMounted:!0,onClose:e,"aria-describedby":"alert-dialog-slide-description",children:[r.jsx(At,{children:"Delete this chat"}),r.jsx(Rt,{children:r.jsx(Tt,{id:"alert-dialog-slide-description",children:"Are you sure you want to delete this chat?"})}),r.jsxs(Et,{children:[r.jsx(Ee,{onClick:e,children:"Cancel"}),r.jsx(Ee,{onClick:e,children:"Yes"})]})]}),wi=({messages:t})=>{const{workspaceEl:e}=Oe(),[s,n]=d.useState(!1),[i,o]=d.useState(!1),[a,c]=d.useState([]),{isMobile:h,chatBoxHeight:u}=W();d.useEffect(()=>{t&&t.length>0&&c(t.filter(_=>_.type==="img"||_.type==="doc"))},[t,e]);const f=()=>{n(!1)},g=()=>{o(!1)},[l,A]=d.useState(0),k=(_,R)=>{A(R)},[T,y]=d.useState(null),v=_=>{y(_),window.open(`${Ve()}/${_}`,"_blank")},S={fontSize:12,minWidth:120};return r.jsxs(F,{sx:{width:h?"80vw":"30vw",p:1,minHeight:u,maxHeight:u,boxSizing:"border-box"},children:[r.jsxs(w,{className:"scrollbar",sx:{position:"relative",flexGrow:1},p:1,spacing:3,children:[r.jsxs(Ls,{value:l,onChange:k,"aria-label":"nav tabs",children:[r.jsx(ut,{iconPosition:"start",label:"QR",id:"tab-0","aria-controls":"tabpanel-0",sx:S}),r.jsx(ut,{iconPosition:"start",label:"Ti liu",id:"tab-0","aria-controls":"tabpanel-0",sx:S})]}),l===0&&r.jsxs(w,{direction:"column",spacing:0,sx:{width:"100%",overflowY:"auto",overflowX:"hidden"},children:[r.jsx(lt,{title:"M QR cho khch hng",filename:"qrcode-admake-khachhang.png",url:`${window.location.origin}/chat/${e==null?void 0:e.id}`}),r.jsx(lt,{title:"M QR cho nhn vin",filename:"qrcode-admake-nhanvien.png",url:`${window.location.origin}/chat/a${e==null?void 0:e.id}`})]}),l===1&&r.jsx(F,{sx:{p:.5,width:"100%",overflowY:"scroll"},children:a.length>0?a.map((_,R)=>{var L;return r.jsx("img",{src:`${Ve()}/${_.file_url}`,alt:(L=_==null?void 0:_.file_url)==null?void 0:L.split("_")[0],style:{width:"100%",height:"auto",marginBottom:8,cursor:"pointer"},onClick:()=>v((_==null?void 0:_.file_url)??"")},R)}):r.jsx(N,{variant:"body1",children:"Cha c ti liu"})}),r.jsx(ks,{})]}),s&&r.jsx(vi,{open:s,handleClose:f}),i&&r.jsx(_i,{open:i,handleClose:g})]})},Bi=()=>{const{workspaceEl:t,setWorkspaceEl:e}=Oe(),[s,n]=d.useState(!1),[i,o]=d.useState([]),[a,c]=d.useState(""),[h,u]=d.useState(""),[f,g]=d.useState(!1),[l,A]=d.useState(null),k=Ct(),{userRoleId:T,workspaces:y,isMobile:v,isFullChatUI:S,chatBoxHeight:_}=W();d.useEffect(()=>{t!=null&&L(t)},[t]);const R=x=>{o(E=>E.filter(M=>M.message_id!==x.message_id)),b.emit("admake/chat/delete",{message_id:x.message_id,workspace_id:x.workspace_id})},L=x=>{e&&e(x),g(!0),fetch(`${k}/group/${x.id}/messages`).then(E=>E.json()).then(E=>{E&&E.messages&&(console.log("Data_Message",E.messages),o(E.messages),c(x.name),u(x.status),e(x)),g(!1)}).catch(E=>{console.error("Error khi ly d liu:",E),A(E),g(!1)}),n(!1)};d.useEffect(()=>{if(t)return b.on("admake/chat/message_deleted",({message_id:x})=>{o(E=>E.filter(M=>M.message_id!==x))}),b.emit("admake/chat/join_group",{workspace_id:t.id}),b.on("admake/chat/message",x=>{x.workspace_id===t.id&&o(E=>[...E,x])}),()=>{b.off("admake/chat/message"),b.off("admake/chat/message_deleted"),b.emit("admake/chat/leave_group",{group_id:t.id})}},[t]);const U=Z();return r.jsx(r.Fragment,{children:r.jsxs(w,{direction:v?"column":"row",style:{minHeight:"82vh"},children:[S&&r.jsx(F,{sx:{backgroundColor:U.palette.mode==="light"?"#F8FAFF":"#fff",minWidth:"20vw",display:{xs:s?"block":"none",sm:"block"},boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:r.jsx(w,{spacing:.5,className:"scrollbar",sx:{flexGrow:1,height:_,overflowY:"hidden"},children:y&&y.map((x,E)=>r.jsx(rn,{workspace:x,onClick:()=>L(x),selected:(t==null?void 0:t.id)===x.id},`ChatElement-${E}`))})}),r.jsx(xi,{setMessages:o,messages:i,title:a,status:h||null,onDelete:R}),S&&r.jsx(wi,{messages:i})]})})};export{ji as C,Bi as G,Oe as u};
