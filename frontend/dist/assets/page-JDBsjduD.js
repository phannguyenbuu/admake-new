import{l as i,n as U,q as v,r as c,s as e}from"./index-DSXg4j8h.js";import{F as f}from"./FormUser-BYqKuoDv.js";import{B as R}from"./Button-Cwj0wenY.js";import{T as N,a as T,Q as _}from"./data-DLPpVsX8.js";import{u as Q,U as $}from"./dashboard-MTfjOaBh.js";import{c as q}from"./Add-C2G_wMcD.js";import"./index-DbPdFFKV.js";import"./JobAsset-D7TWggFq.js";import"./DeleteConfirm-fc_XuyEG.js";import"./Button-BC5GB06O.js";import"./Send-D2xSmM1Y.js";import"./index-BfPcpEh8.js";import"./Popper-D2DKWiam.js";import"./index-5sgN3aGs.js";import"./CaretUpOutlined-DuUKvZRu.js";import"./QRCode-1UIPng5S.js";import"./TitlePanel-Blu2GmVX.js";import"./UserOutlined-ixKGLiYK.js";const E={getAll:(t={})=>i.get("/supplier/",{params:t}),getDetail:t=>i.get(`/supplier/${t}`),create:t=>i.post("/supplier/",t),update:(t,l)=>i.put(`/supplier/${t}`,l),delete:t=>i.delete(`/supplier/${t}`)},F="supplier/queryPagination";function k(t={}){return U({queryKey:[F,t],queryFn:()=>E.getAll(t)})}const ee=()=>{const{userLeadId:t,canViewPermission:l}=v(),[p,g]=c.useState({openCreate:!1,openUpdate:!1}),[a,m]=c.useState({page:1,limit:10,lead:t,search:""}),[x,d]=c.useState(!1),y=Q(a.search,500),{data:n,isLoading:b,refetch:j}=k({...a,search:y}),u=async()=>{d(!0);try{await j()}finally{setTimeout(()=>{d(!1)},500)}},[h,S]=c.useState(null),o=r=>()=>{g({...p,[r]:!p[r]})},w=r=>{m({...a,search:r,page:1})};return l!=null&&l.view_supplier?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen p-2 w-full",children:[e.jsx(R,{toggle:o("openCreate"),refetch:u,title:"Thêm thầu phụ",loading:x,onSearch:w}),e.jsx(N,{columns:T,dataSource:n==null?void 0:n.data,loading:b,rowSelection:{type:"radio",columnWidth:100,renderCell:(r,s)=>{const C={salary:0,items:[],leaves:[],user_id:s.id,username:(s==null?void 0:s.fullName)??"",userrole:"supplier"};return e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"!text-cyan-600 !cursor-pointer !text-xl",onClick:()=>{S(s),o("openUpdate")()}}),e.jsx(_,{record:C})]})}},pagination:{pageSize:a.limit,current:a.page,total:(n==null?void 0:n.total)||0,onChange:(r,s)=>{m({...a,page:r,limit:s})},showSizeChanger:!0,showTotal:(r,s)=>`${s[0]}-${s[1]} của ${r} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}}),p.openCreate&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(f,{isAppend:!0,onCancel:o("openCreate"),onRefresh:()=>{o("openCreate")(),u()},isSupplier:!0})})]}),p.openUpdate&&h&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(f,{isAppend:!1,onCancel:o("openUpdate"),onRefresh:()=>{o("openUpdate")(),u()},user:h,isSupplier:!0})})]})]})}):e.jsx($,{})},te=async()=>(await new Promise(t=>setTimeout(t,2e3)),{userId:1,name:"John Doe"});export{ee as default,te as loader};
