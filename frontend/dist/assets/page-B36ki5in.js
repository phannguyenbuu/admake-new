import{l as i,n as U,q as v,r as c,s as e}from"./index-BpUPXcL_.js";import{F as f}from"./FormUser-EoTjgn2O.js";import{B as R}from"./Button-DJkNWzAJ.js";import{T as N,a as T,Q as _}from"./data-DYZpf2IN.js";import{u as Q,U as $}from"./dashboard-CnTXUokc.js";import{c as q}from"./Add-DpSBps33.js";import"./index-BAkxpmyU.js";import"./JobAsset-DWFnkQBE.js";import"./dayjs.min-C6See26L.js";import"./Button-BNeyAR28.js";import"./Send-Drl3n17p.js";import"./index-Wy-PPjEe.js";import"./index-CzJWAm6W.js";import"./CaretUpOutlined-ByFJ9-Rr.js";import"./QRCode-DuTOs_t_.js";import"./TitlePanel-DNSmZtm7.js";import"./UserOutlined-CMyp42RR.js";const E={getAll:(s={})=>i.get("/supplier/",{params:s}),getDetail:s=>i.get(`/supplier/${s}`),create:s=>i.post("/supplier/",s),update:(s,l)=>i.put(`/supplier/${s}`,l),delete:s=>i.delete(`/supplier/${s}`)},F="supplier/queryPagination";function k(s={}){return U({queryKey:[F,s],queryFn:()=>E.getAll(s)})}const V=()=>{const{userLeadId:s,canViewPermission:l}=v(),[p,g]=c.useState({openCreate:!1,openUpdate:!1}),[a,m]=c.useState({page:1,limit:10,lead:s,search:""}),[x,d]=c.useState(!1),y=Q(a.search,500),{data:n,isLoading:b,refetch:j}=k({...a,search:y}),u=async()=>{d(!0);try{await j()}finally{setTimeout(()=>{d(!1)},500)}},[h,S]=c.useState(null),o=r=>()=>{g({...p,[r]:!p[r]})},w=r=>{m({...a,search:r,page:1})};return l!=null&&l.view_supplier?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen p-2 w-full",children:[e.jsx(R,{toggle:o("openCreate"),refetch:u,title:"Thêm thầu phụ",loading:x,onSearch:w}),e.jsx(N,{columns:T,dataSource:n==null?void 0:n.data,loading:b,rowSelection:{type:"radio",columnWidth:100,renderCell:(r,t)=>{const C={salary:0,items:[],leaves:[],user_id:t.id,username:(t==null?void 0:t.fullName)??"",userrole:"supplier"};return e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"!text-cyan-600 !cursor-pointer !text-xl",onClick:()=>{S(t),o("openUpdate")()}}),e.jsx(_,{record:C})]})}},pagination:{pageSize:a.limit,current:a.page,total:(n==null?void 0:n.total)||0,onChange:(r,t)=>{m({...a,page:r,limit:t})},showSizeChanger:!0,showTotal:(r,t)=>`${t[0]}-${t[1]} của ${r} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}}),p.openCreate&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(f,{isAppend:!0,onCancel:o("openCreate"),onRefresh:()=>{o("openCreate")(),u()},isSupplier:!0})})]}),p.openUpdate&&h&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(f,{isAppend:!1,onCancel:o("openUpdate"),onRefresh:()=>{o("openUpdate")(),u()},user:h,isSupplier:!0})})]})]})}):e.jsx($,{})},ee=async()=>(await new Promise(s=>setTimeout(s,2e3)),{userId:1,name:"John Doe"});export{V as default,ee as loader};
