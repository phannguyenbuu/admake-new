import{l as i,n as N,q as T,r as c,s as e}from"./index-DwiI2IhC.js";import{F as y}from"./FormUser-D1JGykAS.js";import{B as _}from"./Button-D9oAlcwx.js";import{T as Q,a as $,Q as q}from"./data-u7CbCEC5.js";import{u as E,U as F}from"./dashboard-TcPV1bdS.js";import{c as k}from"./Add-19pJME5G.js";import"./index-udfmYiN-.js";import"./JobAsset-CpQQT6M4.js";import"./DeleteConfirm-B-vFUD1g.js";import"./Button-CdbztWtG.js";import"./Send-kh9MbFaG.js";import"./index-CW0pHrm9.js";import"./Popper-DWsuAb0h.js";import"./index-CXPK8Dzd.js";import"./CaretUpOutlined-Dq7FnadQ.js";import"./QRCode-oaCYiJOe.js";import"./TitlePanel-eEfI5l9A.js";import"./UserOutlined-C2X6IIvp.js";const z={getAll:(t={})=>i.get("/supplier/",{params:t}),getDetail:t=>i.get(`/supplier/${t}`),create:t=>i.post("/supplier/",t),update:(t,l)=>i.put(`/supplier/${t}`,l),delete:t=>i.delete(`/supplier/${t}`)},D="supplier/queryPagination";function I(t={}){return N({queryKey:[D,t],queryFn:()=>z.getAll(t)})}const ae=()=>{var g,x;const{userLeadId:t,canViewPermission:l}=T(),[p,b]=c.useState({openCreate:!1,openUpdate:!1}),[n,d]=c.useState({page:1,limit:10,lead:t,search:""}),[j,m]=c.useState(!1),w=E(n.search,500),{data:r,isLoading:S,refetch:C}=I({...n,search:w}),h=Array.isArray((g=r==null?void 0:r.data)==null?void 0:g.data)?r.data.data:Array.isArray(r==null?void 0:r.data)?r.data:[],U=Number(((x=r==null?void 0:r.data)==null?void 0:x.total)??(r==null?void 0:r.total)??h.length),u=async()=>{m(!0);try{await C()}finally{setTimeout(()=>{m(!1)},500)}},[f,v]=c.useState(null),o=a=>()=>{b({...p,[a]:!p[a]})},R=a=>{d({...n,search:a,page:1})};return l!=null&&l.view_supplier?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen p-2 w-full",children:[e.jsx(_,{toggle:o("openCreate"),refetch:u,title:"Thêm thầu phụ",loading:j,onSearch:R}),e.jsx(Q,{columns:$,dataSource:h,loading:S,rowSelection:{type:"radio",columnWidth:100,renderCell:(a,s)=>{const A={salary:0,items:[],leaves:[],user_id:s.id,username:(s==null?void 0:s.fullName)??"",userrole:"supplier"};return e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"!text-cyan-600 !cursor-pointer !text-xl",onClick:()=>{v(s),o("openUpdate")()}}),e.jsx(q,{record:A})]})}},pagination:{pageSize:n.limit,current:n.page,total:U,onChange:(a,s)=>{d({...n,page:a,limit:s})},showSizeChanger:!0,showTotal:(a,s)=>`${s[0]}-${s[1]} của ${a} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}}),p.openCreate&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(y,{isAppend:!0,onCancel:o("openCreate"),onRefresh:()=>{o("openCreate")(),u()},isSupplier:!0})})]}),p.openUpdate&&f&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(y,{isAppend:!1,onCancel:o("openUpdate"),onRefresh:()=>{o("openUpdate")(),u()},user:f,isSupplier:!0})})]})]})}):e.jsx(F,{})},ne=async()=>(await new Promise(t=>setTimeout(t,2e3)),{userId:1,name:"John Doe"});export{ae as default,ne as loader};
