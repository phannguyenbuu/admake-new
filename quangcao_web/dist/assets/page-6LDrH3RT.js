import{a as i,u as C,c as R,r as p,j as s}from"./index-BOs83NHc.js";import{F as h}from"./FormUser-DT49c9NW.js";import{B as U}from"./Button-CWAXngaH.js";import{T as v,a as N,Q as T}from"./data-BCoKNeSv.js";import{b as Q}from"./dashboard-plewuymM.js";import{R as _}from"./index-TUd_xi1d.js";import"./index-DgBnLiW2.js";import"./JobAsset-B5-JC0zL.js";import"./TitlePanel-B4MphDSI.js";import"./Send-Cpr66Tur.js";import"./index-DhDXe4gJ.js";import"./QRCode-BbVUnIYs.js";import"./auth.service-DiTkkKzf.js";const $={getAll:(e={})=>i.get("/supplier/",{params:e}),getDetail:e=>i.get(`/supplier/${e}`),create:e=>i.post("/supplier/",e),update:(e,a)=>i.put(`/supplier/${e}`,a),delete:e=>i.delete(`/supplier/${e}`)},E="supplier/queryPagination";function k(e={}){return C({queryKey:[E,e],queryFn:()=>$.getAll(e)})}const G=()=>{const{userLeadId:e}=R(),[a,f]=p.useState({openCreate:!1,openUpdate:!1}),[n,u]=p.useState({page:1,limit:10,lead:e,search:""}),[g,m]=p.useState(!1),x=Q(n.search,500),{data:o,isLoading:y,refetch:b}=k({...n,search:x}),c=async()=>{m(!0);try{await b()}finally{setTimeout(()=>{m(!1)},500)}},[d,j]=p.useState(null),l=r=>()=>{f({...a,[r]:!a[r]})},S=r=>{u({...n,search:r,page:1})};return s.jsxs("div",{className:"min-h-screen p-2 w-full",children:[s.jsx(U,{toggle:l("openCreate"),refetch:c,title:"Thêm thầu phụ",loading:g,onSearch:S}),s.jsx(v,{columns:N,dataSource:o==null?void 0:o.data,loading:y,rowSelection:{type:"radio",columnWidth:100,renderCell:(r,t)=>{const w={salary:0,items:[],leaves:[],user_id:t.id,username:(t==null?void 0:t.fullName)??"",userrole:"supplier"};return s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"!text-cyan-600 !cursor-pointer !text-xl",onClick:()=>{j(t),l("openUpdate")()}}),s.jsx(T,{record:w})]})}},pagination:{pageSize:n.limit,current:n.page,total:(o==null?void 0:o.total)||0,onChange:(r,t)=>{u({...n,page:r,limit:t})},showSizeChanger:!0,showTotal:(r,t)=>`${t[0]}-${t[1]} của ${r} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}}),a.openCreate&&s.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[s.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),s.jsx("div",{className:"w-full",children:s.jsx(h,{isAppend:!0,onCancel:l("openCreate"),onRefresh:()=>{l("openCreate")(),c()},isSupplier:!0})})]}),a.openUpdate&&d&&s.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[s.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),s.jsx("div",{className:"w-full",children:s.jsx(h,{isAppend:!1,onCancel:l("openUpdate"),onRefresh:()=>{l("openUpdate")(),c()},user:d,isSupplier:!0})})]})]})},H=async()=>(await new Promise(e=>setTimeout(e,2e3)),{userId:1,name:"John Doe"});export{G as default,H as loader};
