import{r as e,a1 as R,v as o,aN as T,ac as C}from"./index-D8Lzm1ua.js";import{T as E,c as L}from"./data-DggGL2_a.js";import"./index-QtUOr3Qh.js";const $=()=>{const[a,d]=e.useState({page:1,limit:10,search:""}),[n,g]=e.useState([]),[h,r]=e.useState(!1),[m,f]=e.useState(0),[i,l]=e.useState(!1),[S,c]=e.useState(null),{userLeadId:x}=R(),w=t=>{c(t),l(!0)},k=()=>{l(!1),c(null)},y=async({page:t,limit:s,search:j})=>{r(!0);try{const p=await(await fetch(`${C()}/workpoint/page?`+new URLSearchParams({lead:x.toString(),page:String(t),limit:String(s),search:j}))).json();g(p.data),f(p.pagination.total)}catch(u){console.error("Failed to fetch users",u)}finally{r(!1)}};return e.useEffect(()=>{y(a)},[a]),e.useEffect(()=>{console.log("Workpoints",n)},[n]),o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"min-h-screen p-2 w-full",children:o.jsx(E,{columns:L(w),dataSource:n,loading:h,pagination:{pageSize:a.limit,current:a.page,total:m,onChange:(t,s)=>{d({...a,page:t,limit:s})},showSizeChanger:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} của ${t} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}})}),i&&o.jsx(T,{selectedRecord:S,modalVisible:i,handleOk:k})]})};export{$ as default};
