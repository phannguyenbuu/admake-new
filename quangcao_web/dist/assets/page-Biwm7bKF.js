import{l as i,u as C,a as R,r as p,j as s}from"./index-C3f_Z7mG.js";import{F as h}from"./FormUser-Da5rNFiZ.js";import{u as U,B as v}from"./useDebounce-Caj2dyEJ.js";import{T as N,a as T,Q}from"./data-snctMTll.js";import{R as _}from"./index-CFECD5Bm.js";import"./index-DH_RNqSe.js";import"./Input-xKRdUnX_.js";import"./useVariants-CebT2jKZ.js";import"./index-DgfthGL7.js";import"./TitlePanel-drNXgoEm.js";import"./index-CiaPKZSO.js";import"./index-B8oNH9Te.js";import"./QRCode-D5WuQovP.js";const $={getAll:(e={})=>i.get("/supplier/",{params:e}),getDetail:e=>i.get(`/supplier/${e}`),create:e=>i.post("/supplier/",e),update:(e,a)=>i.put(`/supplier/${e}`,a),delete:e=>i.delete(`/supplier/${e}`)},E="supplier/queryPagination";function k(e={}){return C({queryKey:[E,e],queryFn:()=>$.getAll(e)})}const G=()=>{const{userLeadId:e}=R(),[a,f]=p.useState({openCreate:!1,openUpdate:!1}),[n,u]=p.useState({page:1,limit:10,lead:e,search:""}),[g,d]=p.useState(!1),x=U(n.search,500),{data:l,isLoading:y,refetch:b}=k({...n,search:x}),c=async()=>{d(!0);try{await b()}finally{setTimeout(()=>{d(!1)},500)}},[m,j]=p.useState(null),o=r=>()=>{f({...a,[r]:!a[r]})},S=r=>{u({...n,search:r,page:1})};return s.jsxs("div",{className:"min-h-screen p-2 w-full",children:[s.jsx(v,{toggle:o("openCreate"),refetch:c,title:"Thêm thầu phụ",loading:g,onSearch:S}),s.jsx(N,{columns:T,dataSource:l==null?void 0:l.data,loading:y,rowSelection:{type:"radio",columnWidth:100,renderCell:(r,t)=>{const w={salary:0,items:[],leaves:[],user_id:t.id,username:(t==null?void 0:t.fullName)??"",userrole:"supplier"};return s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"!text-cyan-600 !cursor-pointer !text-xl",onClick:()=>{j(t),o("openUpdate")()}}),s.jsx(Q,{record:w})]})}},pagination:{pageSize:n.limit,current:n.page,total:(l==null?void 0:l.total)||0,onChange:(r,t)=>{u({...n,page:r,limit:t})},showSizeChanger:!0,showTotal:(r,t)=>`${t[0]}-${t[1]} của ${r} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}}),a.openCreate&&s.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[s.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),s.jsx("div",{className:"w-full",children:s.jsx(h,{isAppend:!0,onCancel:o("openCreate"),onRefresh:()=>{o("openCreate")(),c()},isSupplier:!0})})]}),a.openUpdate&&m&&s.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[s.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),s.jsx("div",{className:"w-full",children:s.jsx(h,{isAppend:!1,onCancel:o("openUpdate"),onRefresh:()=>{o("openUpdate")(),c()},user:m,isSupplier:!0})})]})]})},H=async()=>(await new Promise(e=>setTimeout(e,2e3)),{userId:1,name:"John Doe"});export{G as default,H as loader};
