import{r as e,q as R,s as a,v as T}from"./index-DiG4yKa1.js";import{T as C,c as E}from"./data-D5yL6C7l.js";import{S as L}from"./SalaryBoard-C_nQ7SJ1.js";import"./TitlePanel-B3fuJnba.js";import"./index-wUWx_h0q.js";import"./JobAsset-BYN67cfc.js";import"./Send-BgSxatO-.js";import"./dashboard-CRx6I5Rc.js";import"./auth.service-BNtNnurU.js";import"./index-BbdTex19.js";import"./QRCode-CY7Bpged.js";import"./Tabs-COR3TeEg.js";import"./TableRow-c8Zo6Q8A.js";const _=()=>{const[o,u]=e.useState({page:1,limit:10,search:""}),[r,d]=e.useState([]),[g,n]=e.useState(!1),[h,f]=e.useState(0),[i,l]=e.useState(!1),[S,c]=e.useState(null),{userLeadId:x}=R(),w=t=>{c(t),l(!0)},k=()=>{l(!1),c(null)},y=async({page:t,limit:s,search:j})=>{n(!0);try{const m=await(await fetch(`${T()}/workpoint/page?`+new URLSearchParams({lead:x.toString(),page:String(t),limit:String(s),search:j}))).json();d(m.data),f(m.pagination.total)}catch(p){console.error("Failed to fetch users",p)}finally{n(!1)}};return e.useEffect(()=>{y(o)},[o]),e.useEffect(()=>{console.log("Workpoints",r)},[r]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"min-h-screen p-2 w-full",children:a.jsx(C,{columns:E(w),dataSource:r,loading:g,pagination:{pageSize:o.limit,current:o.page,total:h,onChange:(t,s)=>{u({...o,page:t,limit:s})},showSizeChanger:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} của ${t} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}})}),i&&a.jsx(L,{selectedRecord:S,modalVisible:i,handleOk:k})]})};export{_ as default};
