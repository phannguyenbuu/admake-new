import{r as a,j as e,T as U,c as V,p as Le,q as Y,f as L,t as E,v as Ie,o as H,M as me,S as T,b as fe,w as xe,x as Ne,L as _e,s as ce,n as Ue,g as ze,E as He,W as Ye,h as Je,i as Ke,k as Ve,l as qe,U as Ge,P as Xe,R as Qe,m as Ze}from"./index-BOs83NHc.js";import{a as J,M as Ee,T as et}from"./TitlePanel-B4MphDSI.js";import{B as R,T as K}from"./Send-Cpr66Tur.js";import{T as tt,a as nt,b as le,c as $,d as ot}from"./TableRow-DtffpQev.js";import{T as st,C as de}from"./TableHead-DR1uDx_S.js";import{g as at,J as rt}from"./Managerment-DwnQPaND.js";import{J as he,L as pe,A as je,D as Z}from"./JobAsset-B5-JC0zL.js";import{I as it}from"./index-DgBnLiW2.js";import"./useUpdateButtonTask-DoVUhNOQ.js";import{T as ct,a as ue}from"./Tabs-C2J7iBc_.js";import{S as lt}from"./SalaryBoard-DgvHil1l.js";import"./index-TUd_xi1d.js";const dt=()=>new Date().toLocaleString("vi-VN",{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),ht=()=>{const[t,o]=a.useState(new Date);return a.useEffect(()=>{const n=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(n)},[]),e.jsx(J,{children:e.jsxs(U,{variant:"body1",children:[dt()," "]})})},ut=[{key:"morning",label:"Sáng"},{key:"noon",label:"Chiều"},{key:"evening",label:"Tối"}];function gt(){const t=new Date,o=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${o}-${n}-${s}`}function mt({workpoint:t,fetchWorkpoint:o}){const n={maxHeight:15,fontSize:14,fontWeight:700,whiteSpace:"nowrap",maxWidth:60},[s,y]=a.useState(!1),{userId:u,userLeadId:f}=V(),[c,d]=a.useState(!1),p=()=>{d(!0)},D=async()=>{d(!1),y(!0);try{const g=`${L()}/workpoint/remove/${t==null?void 0:t.user_id}/?day=${gt()}`,b=await fetch(g,{method:"PUT"});if(!b.ok)throw new Error(`Network error: ${b.status}`);const l=await b.json();return o(),l}catch(g){throw console.error("Fetch error:",g),g}};return e.jsxs(e.Fragment,{children:[t&&!s&&e.jsxs(R,{sx:{borderRadius:10,border:"1px solid orange",color:"orange",mt:.5,height:30,maxWidth:300,mb:1},onClick:p,children:[e.jsx("img",{src:"/remove-bookmark-svgrepo-com.svg",alt:"ADMAKE",style:{width:20}}),"Xóa điểm danh gần nhất"]}),e.jsx(tt,{component:Le,sx:{maxWidth:800,minHeight:250,gap:5,background:"none"},children:e.jsxs(nt,{children:[e.jsx(st,{children:e.jsxs(le,{sx:n,children:[e.jsx($,{sx:n,children:"Buổi"}),e.jsx($,{sx:n,children:"Vào"}),e.jsx($,{sx:n,children:"Ra"}),e.jsx($,{sx:n,children:"Số giờ"})]})}),e.jsx(ot,{children:t&&t.checklist&&ut.map(({key:g,label:b})=>{var m,B,W,x;let l=null;if(g==="morning"||g==="noon"||g==="evening"){const v=g;l=(m=t==null?void 0:t.checklist)==null?void 0:m[v]}return e.jsxs(le,{sx:{height:60},children:[e.jsx($,{sx:n,children:b}),e.jsx($,{sx:n,children:(B=l==null?void 0:l.in)!=null&&B.time?e.jsx(Y,{sx:{background:"#00B4B6",p:1,borderRadius:2},children:new Date(l.in.time).toLocaleTimeString()}):"---"}),e.jsx($,{sx:n,children:(W=l==null?void 0:l.out)!=null&&W.time?e.jsx(Y,{sx:{background:"#00B4B6",p:1,borderRadius:2},children:new Date(l.out.time).toLocaleTimeString()}):"---"}),e.jsx($,{sx:n,children:(x=l==null?void 0:l.out)!=null&&x.time&&(l==null?void 0:l.workhour)!==void 0?l.workhour.toFixed(2):"---"})]},g)})})]})}),e.jsx(Ee,{title:"Bạn có chắc muốn xóa điểm danh ?",open:c,onOk:D,onCancel:()=>d(!1)})]})}const ft=E(e.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})),xt=E(e.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),pt=E(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),{TextArea:jt}=it,yt=async t=>{const o=await fetch(`${L()}/task/${t}/by_user`);if(!o.ok)throw new Error(`Error fetching tasks for user ${t}`);const n=await o.json();return console.log("taskk",n.data),n.data},St=()=>fe({mutationFn:yt}),wt=({userId:t,fullName:o,open:n,onCancel:s})=>{const[y,u]=a.useState("task"),{mutate:f,data:c,isPending:d,isError:p,error:D}=St(),{isMobile:g,notifyAdmin:b,generateDatetimeId:l}=V(),{taskDetail:m,setTaskDetail:B}=Ie(),W=()=>{const h={id:l(),user_id:t,type:"task",description:m==null?void 0:m.workspace_id,text:`<${m==null?void 0:m.workspace}/${m==null?void 0:m.title}> hoàn thành. Vui lòng chuyển trạng thái !`,target:`/dashboard/work-tables/${m==null?void 0:m.workspace_id}`};console.log("Note",h),b(h)};a.useEffect(()=>{t&&f(t)},[]);const[x,v]=H.useState(1),I=1,P=c&&c.length>0?c.slice((x-1)*I,x*I):[],k=c?Math.ceil(c.length/I):1;a.useEffect(()=>{c&&c.length>0&&B(c[x-1]||c[0])},[x,c]);const M={color:"#fff",padding:10,paddingLeft:30,paddingRight:30,backgroundColor:"#00B5B4",whiteSpace:"nowrap",borderRadius:10};return e.jsx(me,{open:n,onCancel:s,footer:null,children:e.jsxs(J,{children:[e.jsxs("div",{style:{marginTop:0,display:"flex",justifyContent:"center",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:()=>v(h=>Math.max(h-1,1)),disabled:x===1,children:e.jsx(xt,{fontSize:"small"})}),e.jsxs("span",{children:["Trang ",x," / ",k]}),e.jsx("button",{onClick:()=>v(h=>Math.min(h+1,k)),disabled:x===k,children:e.jsx(pt,{fontSize:"small"})})]}),e.jsx(T,{spacing:5,py:2,alignItems:"flex-start",justifyContent:"flex-start",style:{boxSizing:"border-box"},children:P.length>0?P.map(h=>e.jsxs(T,{spacing:1,style:{background:"#ddd",padding:10,borderRadius:20,width:g?340:""},children:[e.jsxs(T,{direction:"row",spacing:1,children:[e.jsxs(R,{style:M,onClick:W,children:[e.jsx(ft,{}),at((h==null?void 0:h.status)??"")]}),h.workspace&&e.jsxs(T,{direction:"column",children:[e.jsx(U,{style:{marginTop:8,fontStyle:"italic",color:"#00B5B4",fontSize:10,fontWeight:500},children:h==null?void 0:h.workspace}),e.jsx(U,{style:{marginTop:8,fontStyle:"italic",color:"#00B5B4",fontSize:10,fontWeight:500},children:m==null?void 0:m.title})]})]}),e.jsx(jt,{readOnly:!0,value:h==null?void 0:h.description,rows:3,showCount:!0,maxLength:1e3,placeholder:"Mô tả chi tiết về công việc cần thực hiện...",className:"!rounded-lg !border !border-gray-300 focus:!border-cyan-500 focus:!shadow-lg hover:!border-cyan-500 !transition-all !duration-200 !shadow-sm !resize-none !text-xs sm:!text-sm h-40"}),e.jsx(rt,{form:null},h.id),e.jsx(et,{activeKey:y,onChange:q=>u(q),items:[{key:"task",label:"Tài Liệu",children:e.jsx(he,{title:"Tài liệu",type:"task",readOnly:!0})},{key:"comments",label:"Bình luận",children:e.jsx(he,{title:"Bình luận cho mọi người",type:"comment"})}]})]},h.id)):e.jsx(U,{style:{fontStyle:"italic",textAlign:"center"},children:"Chưa có nhiệm vụ"})})]})})};function kt({value:t,onChange:o,checkedMorning:n,checkedAfternoon:s,onCheckMorning:y,onCheckAfternoon:u}){const[f,c]=a.useState(!1),d=p=>{o(p),c(!1)};return e.jsxs(pe,{dateAdapter:je,children:[e.jsx(Z,{label:"Ngày xin nghỉ",open:f,onOpen:()=>c(!0),onClose:()=>c(!1),value:t,onChange:d,enableAccessibleFieldDOMStructure:!1,slots:{textField:K},slotProps:{textField:{variant:"outlined",size:"small"}},disablePast:!0}),e.jsxs(T,{direction:"row",spacing:2,mt:1,children:[e.jsx(de,{checked:n,onChange:p=>y(p.target.checked)}),e.jsx("span",{style:{marginTop:10},children:"Sáng"}),e.jsx(de,{checked:s,onChange:p=>u(p.target.checked)}),e.jsx("span",{style:{marginTop:10},children:"Chiều"})]})]})}function vt({startValue:t,endValue:o,onStartChange:n,onEndChange:s}){const y=t&&o?o.startOf("day").diff(t.startOf("day"),"day")+1:0,[u,f]=a.useState(!1),[c,d]=a.useState(!1),p=g=>{n(g),f(!1)},D=g=>{s(g),d(!1)};return e.jsxs(pe,{dateAdapter:je,children:[e.jsxs(T,{direction:"column",spacing:2,children:[e.jsx(Z,{label:"Ngày bắt đầu",open:u,onOpen:()=>f(!0),onClose:()=>f(!1),value:t,onChange:p,enableAccessibleFieldDOMStructure:!1,slots:{textField:K},slotProps:{textField:{variant:"outlined",size:"small"}},disablePast:!0}),e.jsx(Z,{label:"Ngày kết thúc",open:c,onOpen:()=>d(!0),onClose:()=>d(!1),value:o,onChange:D,enableAccessibleFieldDOMStructure:!1,slots:{textField:K},slotProps:{textField:{variant:"outlined",size:"small"}},disablePast:!0,minDate:t??void 0})]}),e.jsxs("div",{style:{marginTop:12},children:["Số ngày nghỉ: ",e.jsx("strong",{children:y>0?y:0})]})]})}const bt=async t=>{const o=await fetch(`${L()}/leave/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error("Failed to create leave request");return o.json()},Ct=({userId:t,open:o,onCancel:n})=>{const[s,y]=a.useState("oneDay"),{notifyAdmin:u,fullName:f}=V(),[c,d]=a.useState(null),[p,D]=a.useState(!0),[g,b]=a.useState(!0),[l,m]=a.useState(""),[B,W]=a.useState(null),[x,v]=a.useState(null),I=fe({mutationFn:bt,onSuccess:()=>{u({text:"Nhân sự xin nghỉ phép",description:f??"",target:"/dashboard/workpoints"}),n()},onError:k=>{console.error("Lỗi khi tạo yêu cầu nghỉ phép:",k.message)}}),P=()=>{if(!t)return;let k=null,M=null;if(s==="oneDay"){if(!c)return;const h=c.format("YYYY-MM-DD");k=h,M=h}else{if(!B||!x)return;k=B.format("YYYY-MM-DD"),M=x.format("YYYY-MM-DD")}I.mutate({user_id:t,start_time:k,end_time:M,morning:p,noon:g,reason:l})};return e.jsx(me,{open:o,onCancel:n,style:{padding:20},okButtonProps:{style:{display:"none"}},cancelButtonProps:{style:{display:"none"}},children:e.jsxs(T,{children:[e.jsxs(ct,{value:s,onChange:(k,M)=>y(M),"aria-label":"Chọn loại nghỉ phép",centered:!0,children:[e.jsx(ue,{label:"1 ngày",value:"oneDay"}),e.jsx(ue,{label:"nhiều ngày",value:"multiDays"})]}),e.jsxs("div",{style:{marginTop:20},children:[s==="oneDay"&&e.jsx(kt,{value:c,onChange:d,checkedMorning:p,checkedAfternoon:g,onCheckMorning:D,onCheckAfternoon:b}),s==="multiDays"&&e.jsx(vt,{startValue:B,endValue:x,onStartChange:W,onEndChange:v})]}),e.jsx(K,{label:"Lý do xin nghỉ",value:l,onChange:k=>m(k.target.value),multiline:!0,rows:3,variant:"outlined",fullWidth:!0,margin:"normal",placeholder:"Nhập lý do xin nghỉ..."}),e.jsx(R,{fullWidth:!0,style:{marginTop:20,borderRadius:10,backgroundColor:"#00B4B6",color:"#fff"},onClick:P,disabled:s==="oneDay"&&!c||s==="multiDays"&&(!B||!x),children:"Tạo yêu cầu nghỉ phép"})]})})};function ge(t,o){const n=t.getContext("2d");if(!n)return;const s=t.height/1080,y=t.height;n.fillStyle="red",n.font=`${s*150}px Oswald`;const u=s*50,f=y-s*200;n.fillText((o==null?void 0:o[1])||"",u,f),n.font=`${s*50}px Poppins`,n.fillStyle="white",n.fillText((o==null?void 0:o[0])||"",u,f+s*80),n.font=`${s*20}px Arial`,n.fillStyle="#333",n.fillText((o==null?void 0:o[2])||"",u+s*400,f+s*80),n.fillText((o==null?void 0:o[3])||"",u+s*600,f+s*80)}const Tt=({userEl:t})=>{const o=a.useRef(null),n=a.useRef(null),[s,y]=a.useState({latitude:null,longitude:null}),[u,f]=a.useState(null),[c,d]=a.useState("environment"),[p,D]=a.useState(null),[g,b]=a.useState(null),[l,m]=a.useState(""),[B,W]=a.useState(""),[x,v]=a.useState(1),[I,P]=a.useState(!1),[k,M]=a.useState(null),[h,q]=a.useState(!0),[ee,N]=a.useState(null),[ye,G]=a.useState((t==null?void 0:t.role)&&(t==null?void 0:t.role_id)>100),[Se,te]=a.useState(!1),[we,ne]=a.useState(!1),{workpointEl:ke,fetchWorkpointEl:ve}=xe(),[be,oe]=a.useState(!1),{userLeadId:Ce,setUserLeadId:Te,setUserId:De}=V();a.useEffect(()=>{console.log("UserEL",t),t&&t!=null&&t.id&&(Ce===0&&Te(t.lead_id),ve(t.id),De(t==null?void 0:t.id))},[t]);const Be=()=>{oe(!1)},se=Ne();a.useEffect(()=>{const r=window.location.href;if(r.includes("?zarsrc")){const i=r.split("?zarsrc")[0];se.pathname+se.search!==new URL(i).pathname+new URL(i).search&&(window.location.href=i)}},[]);function X(){fetch(`${L()}/workpoint/today/${t==null?void 0:t.id}`).then(r=>{if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return r.json()}).then(r=>{M(r),console.log(r),N(null)}).catch(r=>{N(r.message),M(null)}).finally(()=>{q(!1)})}a.useEffect(()=>{navigator.mediaDevices.enumerateDevices().then(i=>{const C=i.filter(j=>j.kind==="videoinput");ne(C.length>0)}).catch(()=>ne(!1));const r=JSON.parse(localStorage.getItem("Admake-User-Access")||"{}");console.log(r.user_id,r.username),X()},[]),a.useEffect(()=>((async()=>{try{u&&u.getTracks().forEach(C=>C.stop());const i=await navigator.mediaDevices.getUserMedia({video:{facingMode:c}});f(i),o.current&&(o.current.srcObject=i)}catch(i){N("Lỗi truy cập camera: "+i.message)}})(),()=>{u&&u.getTracks().forEach(i=>i.stop())}),[c,x]);const ae=()=>{if(!navigator.geolocation){N("Trình duyệt không hỗ trợ định vị GPS");return}navigator.geolocation.getCurrentPosition(r=>{y({latitude:r.coords.latitude,longitude:r.coords.longitude}),m(`Vị trí: ${r.coords.latitude.toFixed(6)}, ${r.coords.longitude.toFixed(6)}`),N(null)},r=>N("Lỗi lấy vị trí:"+r.message),{enableHighAccuracy:!0})},re=()=>{var j,w;const r=new Date,i=r.toLocaleDateString(),C=r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return[i,C,((j=s.latitude)==null?void 0:j.toString())??"-",((w=s.longitude)==null?void 0:w.toString())??"-"]},Me=()=>{const r=o.current,i=n.current;if(!we||!i||!r){console.log("Không có camera, tạo canvas đen 480x640");const j=n.current,w=480,O=640;j.width=w,j.height=O;const A=j.getContext("2d");if(!A)return;A.fillStyle="black",A.fillRect(0,0,w,O),ge(j,re()),j.toBlob(_=>{D(_),_&&(console.log("Tạo url từ blob để hiển thị hoặc gửi đi!"),b(URL.createObjectURL(_)))},"image/jpeg",.95),P(!0),ae(),v(2);return}if(!i)return;i.width=r.videoWidth,i.height=r.videoHeight;const C=i.getContext("2d");C&&(C.drawImage(r,0,0,i.width,i.height),ge(i,re()),i.toBlob(j=>{D(j),j&&b(URL.createObjectURL(j))},"image/jpeg",.95),P(!0),ae(),v(2))};async function Ae(r,i,C){const j=`${L()}/workpoint/check/${t==null?void 0:t.id}/`;try{const w=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({img:r,lat:i,long:C})});if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const O=await w.json();return console.log("Response data:",O),O}catch(w){throw console.error("Fetch error:",w),w}}const Re=()=>{v(1),P(!1)},Pe=async()=>{var _,ie;if(console.log("handleSend",p),!p)return;let r="0",i="0";const w=(S=>{const F=Q=>Q<10?"0"+Q:Q;return S.getFullYear().toString()+F(S.getMonth()+1)+F(S.getDate())+"_"+F(S.getHours())+F(S.getMinutes())+F(S.getSeconds())})(new Date);r=s.latitude?s.latitude.toFixed(6):"-",i=s.longitude?s.longitude.toFixed(6):"-";const O=`workpoint_${t==null?void 0:t.id}_${w}_${r}_${i}.jpg`,A=new FormData;A.append("latitude",((_=s.latitude)==null?void 0:_.toString())??""),A.append("longitude",((ie=s.longitude)==null?void 0:ie.toString())??""),A.append("time",w),A.append("file",p,O),fetch(`${L()}/message/upload`,{method:"POST",body:A}).then(S=>{if(!S.ok)throw new Error(`HTTP error! status: ${S.status}`);return S.json()}).then(S=>{console.log(S.data.file_url,S.data.link);const F=S.data.file_url;Ae(F,r,i),setTimeout(()=>{ce.success({message:"Đã gửi thành công!"}),v(1),G(!0),X()},1e3)}).catch(S=>{ce.error({message:"Lỗi upload ảnh: "+S.message})}),D(null)},$e=()=>{G(!1),v(1)},We=()=>{te(!1),v(1)},Oe=()=>{G(!0)},Fe=()=>{te(!0)},z=(t==null?void 0:t.role_id)&&(t==null?void 0:t.role_id)>100;return e.jsxs(T,{p:1,height:"100vh",spacing:1,children:[e.jsxs(T,{direction:"row",spacing:0,style:{width:"90vw",marginLeft:10},children:[e.jsx(_e,{}),e.jsx(Y,{style:{width:"50vw",fontWeight:500,marginTop:10,marginLeft:20},children:t==null?void 0:t.fullName})]}),x===1&&e.jsx(e.Fragment,{children:e.jsxs(J,{children:[!z&&e.jsxs(e.Fragment,{children:[e.jsx(ht,{}),e.jsxs(R,{variant:"contained",sx:{backgroundColor:"orange",borderRadius:20,mt:1,height:50,maxWidth:300,mb:1},onClick:Me,children:[e.jsx("img",{src:"/alarm-svgrepo-com.svg",alt:"ADMAKE",style:{width:40}}),"Điểm danh nhé !"]}),e.jsx(mt,{workpoint:k,fetchWorkpoint:X})]}),e.jsxs(T,{direction:"row",spacing:1,p:1,children:[!z&&e.jsx(e.Fragment,{children:e.jsxs(R,{variant:"contained",sx:{borderRadius:40,backgroundColor:"#00B4B6",fontSize:10,whiteSpace:"nowrap",mt:1,height:50,maxWidth:300,mb:1},onClick:Fe,children:[e.jsx("img",{src:"/holiday-island-tourism-svgrepo-com.svg",alt:"ADMAKE",style:{width:32}}),"Nghỉ phép"]})}),e.jsxs(R,{variant:"contained",sx:{borderRadius:40,backgroundColor:"#00B4B6",fontSize:10,textAlign:"left",whiteSpace:"nowrap",mt:1,height:50,maxWidth:300,mb:1},onClick:Oe,children:[e.jsx("img",{src:"/task-done-svgrepo-com.svg",alt:"ADMAKE",style:{width:32}}),"Nhiệm vụ"]}),!z&&e.jsxs(R,{sx:{borderRadius:40,color:"#fff",fontSize:10,backgroundColor:"#00B4B6",textAlign:"left",whiteSpace:"nowrap",mt:1,height:50,maxWidth:300,mb:1},onClick:()=>oe(!0),children:[e.jsx("img",{src:"/pay-svgrepo-com.svg",alt:"ADMAKE",style:{width:32}}),"Bảng lương"]})]}),!z&&e.jsx("video",{ref:o,width:"100%",height:"auto",autoPlay:!0,playsInline:!0,style:{borderRadius:8,backgroundColor:"#000",width:"100%",maxWidth:400}})]})}),x===2&&e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsxs(Y,{sx:{textAlign:"center",mt:1},children:[g&&e.jsx("img",{src:g,alt:"Ảnh đã chụp",style:{maxWidth:"100%",borderRadius:8,height:"60vh"}}),s.latitude&&s.longitude&&e.jsx(U,{sx:{mt:1},children:l})]}),ee&&e.jsx(U,{color:"error",sx:{mt:1},children:ee})]}),e.jsxs(T,{spacing:2,direction:"row",sx:{position:"fixed",bottom:50,left:"50%",transform:"translateX(-50%)"},children:[e.jsx(R,{onClick:Pe,variant:"contained",sx:{backgroundColor:"#00B4B6"},children:"Gửi"}),e.jsx(R,{onClick:Re,children:"Chụp lại"})]})]}),e.jsx("canvas",{ref:n,style:{display:"none"}}),e.jsx(wt,{open:ye,userId:t==null?void 0:t.id,fullName:t==null?void 0:t.fullName,onCancel:$e}),!z&&e.jsx(Ct,{open:Se,userId:t==null?void 0:t.id,onCancel:We}),e.jsx(lt,{selectedRecord:ke,modalVisible:be,handleOk:Be})]})},Dt=()=>{const{id:t}=Ue(),{workpointEl:o}=xe(),[n,s]=H.useState(null),[y,u]=H.useState(!1),[f,c]=H.useState(!0);return H.useEffect(()=>{t&&fetch(`${L()}/workpoint/check-access/${t}`).then(d=>{if(d.status===401||d.status===403)throw window.location.href="/login",new Error("Unauthorized");return d.json()}).then(d=>{console.log(d),d.valid?(u(!0),s(d.data),localStorage.setItem("Admake-User-Access",JSON.stringify({user_id:d.data.id,username:d.data.fullName}))):(u(!1),window.location.href="/login"),c(!1)}).catch(()=>{u(!1),c(!1)})},[t]),f?e.jsx("div",{children:"Loading...Workpoint"}):y?e.jsx(Tt,{userEl:n}):e.jsx("div",{children:"Access denied or invalid token"})},Bt={path:"/",element:e.jsx(Ye,{children:e.jsx(Je,{children:e.jsx(Ke,{children:e.jsx(Ve,{})})})}),errorElement:e.jsx(He,{}),children:[{path:"/point/:id/",element:e.jsx(Dt,{}),title:"Workpoint",ignoreInMenu:!0}]},Mt=ze([Bt],{});qe.createRoot(document.getElementById("root")).render(e.jsx(Ge,{children:e.jsx(Xe,{children:e.jsx(Qe,{fallbackElement:e.jsx(Ze,{}),future:{v7_startTransition:!0},router:Mt})})}));
