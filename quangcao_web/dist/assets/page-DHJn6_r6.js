import{aO as i,aP as C,a1 as v,r as c,v as s,aF as U}from"./index-QLSTtAP0.js";import{F as m}from"./FormUser-CdmH_9eU.js";import{u as R,B as N}from"./useDebounce-Di8rQmnf.js";import{T,a as Q,Q as _}from"./data-CTnvQYkz.js";import"./index-D6uGVMV4.js";const $={getAll:(e={})=>i.get("/supplier/",{params:e}),getDetail:e=>i.get(`/supplier/${e}`),create:e=>i.post("/supplier/",e),update:(e,a)=>i.put(`/supplier/${e}`,a),delete:e=>i.delete(`/supplier/${e}`)},E="supplier/queryPagination";function F(e={}){return C({queryKey:[E,e],queryFn:()=>$.getAll(e)})}const I=()=>{const{userLeadId:e}=v(),[a,f]=c.useState({openCreate:!1,openUpdate:!1}),[n,u]=c.useState({page:1,limit:10,lead:e,search:""}),[g,d]=c.useState(!1),x=R(n.search,500),{data:l,isLoading:y,refetch:b}=F({...n,search:x}),p=async()=>{d(!0);try{await b()}finally{setTimeout(()=>{d(!1)},500)}},[h,S]=c.useState(null),o=r=>()=>{f({...a,[r]:!a[r]})},j=r=>{u({...n,search:r,page:1})};return s.jsxs("div",{className:"min-h-screen p-2 w-full",children:[s.jsx(N,{toggle:o("openCreate"),refetch:p,title:"Thêm thầu phụ",loading:g,onSearch:j}),s.jsx(T,{columns:Q,dataSource:l==null?void 0:l.data,loading:y,rowSelection:{type:"radio",columnWidth:100,renderCell:(r,t)=>{const w={salary:0,items:[],leaves:[],user_id:t.id,username:(t==null?void 0:t.fullName)??"",userrole:"supplier"};return s.jsxs(s.Fragment,{children:[s.jsx(U,{className:"!text-cyan-600 !cursor-pointer !text-xl",onClick:()=>{S(t),o("openUpdate")()}}),s.jsx(_,{record:w})]})}},pagination:{pageSize:n.limit,current:n.page,total:(l==null?void 0:l.total)||0,onChange:(r,t)=>{u({...n,page:r,limit:t})},showSizeChanger:!0,showTotal:(r,t)=>`${t[0]}-${t[1]} của ${r} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}}),a.openCreate&&s.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[s.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),s.jsx("div",{className:"w-full",children:s.jsx(m,{isAppend:!0,onCancel:o("openCreate"),onRefresh:()=>{o("openCreate")(),p()},isSupplier:!0})})]}),a.openUpdate&&h&&s.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[s.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),s.jsx("div",{className:"w-full",children:s.jsx(m,{isAppend:!1,onCancel:o("openUpdate"),onRefresh:()=>{o("openUpdate")(),p()},user:h,isSupplier:!0})})]})]})},L=async()=>(await new Promise(e=>setTimeout(e,2e3)),{userId:1,name:"John Doe"});export{I as default,L as loader};
