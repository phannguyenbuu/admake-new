import{r as e,Z as P,q as R,s as o,v as U}from"./index-CC-dsR2w.js";import{T as E,c as L}from"./data-BpR0hlW3.js";import{S as $}from"./SalaryBoard-C7NtbpXF.js";import{U as b}from"./dashboard-z1viWmsp.js";import"./TitlePanel-BIg70oZi.js";import"./index-Czogar2Y.js";import"./index-CT_HbENb.js";import"./JobAsset-Dzx5qRxS.js";import"./Send-DzM2kTxH.js";import"./QRCode-BV0PN2Jx.js";import"./Tabs-AN1c8nJx.js";import"./TableRow-DOZIULxC.js";import"./auth.service-B3q1VF4-.js";const H=()=>{const[a,u]=e.useState({page:1,limit:10,search:""}),{setTaskDetail:d}=P(),[g,f]=e.useState([]),[h,n]=e.useState(!1),[S,x]=e.useState(0),[i,l]=e.useState(!1),[w,c]=e.useState(null),{userLeadId:k,canViewPermission:r}=R(),j=t=>{c(t),l(!0)},y=()=>{l(!1),c(null)},T=async({page:t,limit:s,search:C})=>{n(!0);try{const m=await(await fetch(`${U()}/workpoint/page?`+new URLSearchParams({lead:k.toString(),page:String(t),limit:String(s),search:C}))).json();f(m.data),x(m.pagination.total)}catch(p){console.error("Failed to fetch users",p)}finally{n(!1)}};return e.useEffect(()=>{T(a)},[a]),e.useEffect(()=>{console.log("canViewPermission",r),d(null)},[]),r!=null&&r.view_workpoint?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"min-h-screen p-2 w-full",children:o.jsx(E,{columns:L(j),dataSource:g,loading:h,pagination:{pageSize:a.limit,current:a.page,total:S,onChange:(t,s)=>{u({...a,page:t,limit:s})},showSizeChanger:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} của ${t} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}})}),i&&o.jsx($,{selectedRecord:w,modalVisible:i,handleOk:y})]}):o.jsx(b,{})};export{H as default};
