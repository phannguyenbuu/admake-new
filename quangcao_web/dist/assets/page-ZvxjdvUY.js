import{l as i,n as U,q as v,r as c,s as e}from"./index-B8c7yZsF.js";import{F as f}from"./FormUser-C5ZqBjBj.js";import{B as R}from"./Button-CbVfoADT.js";import{T as N,a as T,Q as _}from"./data-eC4ZQHTE.js";import{b as Q,U as $}from"./dashboard-DmTt0n0n.js";import{d as q}from"./TitlePanel-DagfMKAl.js";import"./index-BelHgnED.js";import"./JobAsset-DrSiecme.js";import"./Send-DNJ1agkQ.js";import"./index-xdt0xqNR.js";import"./QRCode-GLkfBKGk.js";import"./auth.service-CvIRCEWX.js";const E={getAll:(s={})=>i.get("/supplier/",{params:s}),getDetail:s=>i.get(`/supplier/${s}`),create:s=>i.post("/supplier/",s),update:(s,o)=>i.put(`/supplier/${s}`,o),delete:s=>i.delete(`/supplier/${s}`)},F="supplier/queryPagination";function k(s={}){return U({queryKey:[F,s],queryFn:()=>E.getAll(s)})}const H=()=>{const{userLeadId:s,canViewPermission:o}=v(),[p,g]=c.useState({openCreate:!1,openUpdate:!1}),[a,d]=c.useState({page:1,limit:10,lead:s,search:""}),[x,m]=c.useState(!1),y=Q(a.search,500),{data:n,isLoading:b,refetch:j}=k({...a,search:y}),u=async()=>{m(!0);try{await j()}finally{setTimeout(()=>{m(!1)},500)}},[h,S]=c.useState(null),l=r=>()=>{g({...p,[r]:!p[r]})},w=r=>{d({...a,search:r,page:1})};return o!=null&&o.view_supplier?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen p-2 w-full",children:[e.jsx(R,{toggle:l("openCreate"),refetch:u,title:"Thêm thầu phụ",loading:x,onSearch:w}),e.jsx(N,{columns:T,dataSource:n==null?void 0:n.data,loading:b,rowSelection:{type:"radio",columnWidth:100,renderCell:(r,t)=>{const C={salary:0,items:[],leaves:[],user_id:t.id,username:(t==null?void 0:t.fullName)??"",userrole:"supplier"};return e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"!text-cyan-600 !cursor-pointer !text-xl",onClick:()=>{S(t),l("openUpdate")()}}),e.jsx(_,{record:C})]})}},pagination:{pageSize:a.limit,current:a.page,total:(n==null?void 0:n.total)||0,onChange:(r,t)=>{d({...a,page:r,limit:t})},showSizeChanger:!0,showTotal:(r,t)=>`${t[0]}-${t[1]} của ${r} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}}),p.openCreate&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(f,{isAppend:!0,onCancel:l("openCreate"),onRefresh:()=>{l("openCreate")(),u()},isSupplier:!0})})]}),p.openUpdate&&h&&e.jsxs("div",{className:"fixed inset-0 z-[50] flex justify-center items-center bg-black/30 px-2 overflow-y-auto min-h-screen py-6 hide-scrollbar",children:[e.jsx("style",{children:`
            .hide-scrollbar { scrollbar-width: none; -ms-overflow-style: none; }
            .hide-scrollbar::-webkit-scrollbar { display: none; }
          `}),e.jsx("div",{className:"w-full",children:e.jsx(f,{isAppend:!1,onCancel:l("openUpdate"),onRefresh:()=>{l("openUpdate")(),u()},user:h,isSupplier:!0})})]})]})}):e.jsx($,{})},M=async()=>(await new Promise(s=>setTimeout(s,2e3)),{userId:1,name:"John Doe"});export{H as default,M as loader};
