import{r as o,I as d,_ as h,b1 as g,a as p,a0 as x,ak as c,j as e,b2 as f,b3 as j,c as v,E as w,W as k,b as y,d as b,B as E,e as I,U as L,P as N,R as M,f as P}from"./index-lO3kp6tU.js";import{A as R,R as T}from"./auth.service-tSISp_eD.js";import{F as a,I as m}from"./index-BXkSRU4L.js";import"./Input-DSnf2H6W.js";import"./useVariants-CB3YNYoQ.js";var S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},V=function(n,r){return o.createElement(d,h({},n,{ref:r,icon:S}))},A=o.forwardRef(V);const B=()=>{const[s,n]=o.useState(!1),r=()=>n(!0),i=()=>n(!1);return{loading:s,toggle:()=>s?i():r()}},z=()=>{const{loading:s,toggle:n}=B(),r=g(),{login:i}=p(),{mutate:u}=x({mutationFn:async t=>{const l={...t,username:t.username};return R.login(l)},onError:t=>{c.error({message:"Đăng nhập thất bại",description:t instanceof Error?t.message:"Đã xảy ra lỗi khi đăng nhập"})},onSuccess:async t=>{r.clear();try{await i({username:t.username,password:""})}catch{c.error({message:"Lỗi cập nhật trạng thái người dùng"})}c.success({message:"Đăng nhập thành công",description:"Chào mừng bạn quay trở lại!"}),window.location.href="/dashboard"},onMutate:n,onSettled:n});return e.jsxs(a,{name:"login-form",className:"login-form max-w-sm w-full mx-auto mt-10 min-w-[300px]",onFinish:u,layout:"vertical",children:[e.jsx(a.Item,{label:"Tên đăng nhập",name:"username",rules:[{required:!0,message:"Vui lòng nhập tên đăng nhập!"}],children:e.jsx(m,{prefix:e.jsx(T,{}),placeholder:"Nhập tên đăng nhập"})}),e.jsx(a.Item,{label:"Mật khẩu",name:"password",rules:[{required:!0,message:"Vui lòng nhập mật khẩu!"}],children:e.jsx(m.Password,{prefix:e.jsx(A,{}),placeholder:"Nhập mật khẩu"})}),e.jsx(a.Item,{children:e.jsx(f,{type:"primary",htmlType:"submit",className:"w-full",loading:s,children:s?"Đang đăng nhập...":"Đăng nhập"})})]})},F=()=>{const s=j();return o.useEffect(()=>{sessionStorage.getItem("accessToken")?s("/dashboard",{replace:!0}):sessionStorage.removeItem("accessToken")},[s]),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-sm min-w-[400px]",children:[e.jsxs("div",{className:"flex items-center justify-center pb-5",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/logo.jpg",alt:"logo",className:"w-13 h-13"})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/ADMAKE.svg",alt:"ADMAKE",className:"h-8"})})]}),e.jsx(z,{})]})})},W={path:"/",element:e.jsx(k,{children:e.jsx(y,{children:e.jsx(b,{children:e.jsx(E,{})})})}),errorElement:e.jsx(w,{}),children:[{path:"/login",index:!0,element:e.jsx(F,{}),title:"Đăng nhập",ignoreInMenu:!0}]},q=v([W],{});I.createRoot(document.getElementById("root")).render(e.jsx(L,{children:e.jsx(N,{children:e.jsx(M,{fallbackElement:e.jsx(P,{}),future:{v7_startTransition:!0},router:q})})}));
