import{r as e,q as R,s as o,v as T}from"./index-DlDbvK2b.js";import{T as U,c as C}from"./data-CH6WsTwf.js";import{S as E}from"./SalaryBoard-BpcTUebb.js";import{U as L}from"./dashboard-l1iHcmsZ.js";import"./TitlePanel-C9Rfj9pl.js";import"./index-DYYPPj2u.js";import"./index-DOZOIL0c.js";import"./JobAsset-DjiAzVM5.js";import"./Send-B4wb3LOo.js";import"./QRCode-DQg1K5iq.js";import"./Tabs-DcSvX9ib.js";import"./TableRow-DD9q3zCd.js";import"./auth.service-CsktSbFT.js";const A=()=>{const[a,d]=e.useState({page:1,limit:10,search:""}),[u,g]=e.useState([]),[f,n]=e.useState(!1),[h,S]=e.useState(0),[i,l]=e.useState(!1),[w,c]=e.useState(null),{userLeadId:x,canViewPermission:r}=R(),j=t=>{c(t),l(!0)},k=()=>{l(!1),c(null)},y=async({page:t,limit:s,search:P})=>{n(!0);try{const m=await(await fetch(`${T()}/workpoint/page?`+new URLSearchParams({lead:x.toString(),page:String(t),limit:String(s),search:P}))).json();g(m.data),S(m.pagination.total)}catch(p){console.error("Failed to fetch users",p)}finally{n(!1)}};return e.useEffect(()=>{y(a)},[a]),e.useEffect(()=>{console.log("canViewPermission",r)},[]),r!=null&&r.view_workpoint?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"min-h-screen p-2 w-full",children:o.jsx(U,{columns:C(j),dataSource:u,loading:f,pagination:{pageSize:a.limit,current:a.page,total:h,onChange:(t,s)=>{d({...a,page:t,limit:s})},showSizeChanger:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} của ${t} nhân sự`,style:{paddingRight:"15px"},locale:{items_per_page:"/ Trang"}}})}),i&&o.jsx(E,{selectedRecord:w,modalVisible:i,handleOk:k})]}):o.jsx(L,{})};export{A as default};
